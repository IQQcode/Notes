

### 1.简介

1. request和response对象是由服务器创建的，我们来使用它们

2. request对象是来获取请求消息，response对象是来响应消息

### 2.继承体系结构

ServletRequest               --接口
    |继承
HttpservletRequest        --接口
    |实现
org.apache.catalina.connector.RequestFacade 实现类（Tomca通过此类创建Request对象，并且传递给`service()`）



### 3.Request功能

#### 1. 获取请求消息数据

##### 获取请求行数据

`请求方式`    `请求url`   `请求协议/版本`

`GET`    `/ServletDemo/Demo?uername=Mr.Q`    `HTTP/1.1`

`/ServletDemo`虚拟目录  `/Demo`Servlet路径  `uername=Mr.Q`请求参数

**方法：**

1. 获取请求方式：GET
   
   `String getMethod()`

2. <font color=red>获取虚拟目录：/ServletDemo</font>
   
   - `String getcontextPath()`

3. 获取Servlet路径：/Demo
   
   - `String getservletPath()`

4. 获取get方式请求参数：username=Mr.Q
   
   - `String getQuerystring()`

5. <font color=red>获取请求URI ：/ServletDemo/Demo</font>
   
   - `String getRequestURI()` ：/ServletDemo/Demo
   
   - `StringBuffer getRequestURL()`：http://1ocalhost/ServletDemo/Demo
- URL：统一资源定位符  **/ServletDemo/Demo**

- URI：统一资源标识符  http://1ocalhost/ServletDemo/Demo**

URI 的范围要大于URL

举个例子：

> URI相当于-----共和国
> 
> URL相当于-----中华人名共和国

6. 获取协议及版本：HTTP/1.1
   
   - `String getprotocol()`

7. 获取客户机的IP地址
   
   - `String getRemoteAddr()`



<kbd>获取请求行数据LineDemo</kbd>

```java
import javax.servlet.ServletException;

import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

/**
 * @Author: Mr.Q
 * @Date: 2020-02-05 15:38
 * @Description:Request对象获取请求行数据
 * 1.获取请求方式:GET---String getMethod()
 * 2.获取虚拟目录:/ServletDemo---String getContextPath()
 * 3.获取Servlet路径:/Demo---String getServletPath()
 * 4.获取get方式请求参数:username=Mr.Q---String getQuerystring()
 * 5.获取请求URI: /ServletDemo/Demo
 *                 String getRequestURI(): /ServletDemo/Demo
 *                 StringBuffer getRequestURL(): http://1ocalhost/ServletDemo/Demo
 * 6.获取协议及版本: HTTP/1.1---String getProtocol()
 * 7.获取客户机的IP地址---String getRemoteAddr()
 */

@WebServlet("/Servlet_RequestLine")
public class Servlet_RequestLine extends HttpServlet {
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        //1.获取请求方式:GET---String getMethod()
        String method = request.getMethod();
        System.out.println("获取请求方式GET: " + method);

        //2.获取虚拟目录:/ServletDemo---String getcontextPath()
        String contextPath = request.getContextPath();
        System.out.println("获取虚拟目录: " + contextPath);

        //3.获取Servlet路径:/Demo---String getServletPath()
        String servletPath = request.getServletPath();
        System.out.println("获取Servlet路径:" + request.getServletPath());

        //4.获取get方式请求参数:username=Mr.Q---String getQueryString()
        String queryString = request.getQueryString();
        System.out.println("获取get方式请求参数: " + queryString);

        //5.获取请求URI
        String requestURI = request.getRequestURI();
        System.out.println("getRequestURI(): " + requestURI);
        StringBuffer requestURL = request.getRequestURL();
        System.out.println("getRequestURL: " + requestURL);

        //6.获取协议及版本: HTTP/1.1---String getProtocol()
        String protocol = request.getProtocol();
        System.out.println("获取协议及版本: " + protocol);
        //7.获取客户机的IP地址---String getRemoteAddr()
        String remoteAddr = request.getRemoteAddr();
        System.out.println("获取客户机的IP地址: " + remoteAddr);
    }
}
```

![](E:\MarkText\Cache-img\2020-02-05-16-14-15-image.png)



##### 获取请求头数据

方法：
`String getHeader(String name)`：通过请求头的名称获取请求头的值
`Enumeration<String>getHeaderNames()`：获取所有的请求头名称



<kbd>获取请求头数据HeaderDemo</kbd>

```java
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;
import java.util.Enumeration;

/**
 * @Author: Mr.Q
 * @Date: 2020-02-05 16:29
 * @Description:Request对象获取请求头数据
 */
@WebServlet("/Servlet_RequestHead")
public class Servlet_RequestHead extends HttpServlet {
    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        //1.获取所有请求头名称
        Enumeration<String> headerNames = request.getHeaderNames();
        //2.遍历
        while(headerNames.hasMoreElements()) {
             String name = headerNames.nextElement();
             String value = request.getHeader(name);
            System.out.println(name + "----" + value);
        }

        //获取请求头数据user-agent
        //String agent = request.getHeader("user-agent");
        //if(agent.contains("Chrome")) { } else { }

        //获取请求头数据referer
        //String agent = request.getHeader("referer");
    }
}
```

![](E:\MarkText\Cache-img\2020-02-05-16-38-59-image.png)

##### 获取请求体数据

请求体：只有POST请求方式，才有请求体，在请求体中封装了POST请求的请求参数
步骤：

1. 获取流对象

2. 再从流对象中数据





**请求空行为空数据，起分隔数据的作用，没有必要获取**


#### 2.其他功能





<font color=red size=72>color=gray</font>

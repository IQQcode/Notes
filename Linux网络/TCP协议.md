####  	TCP协议：面向连接，可靠传输，面向字节流



![1563074952108](C:\Users\j2726\AppData\Roaming\Typora\typora-user-images\1563074952108.png)



**为什么握手是三次而挥手是四次？**

> 俩次不安全，有可能`SYN`会延迟，缺乏状态保护的情况下，收到一个`SYN`会建立一个新的`scoket`，完整的状态保护避免创建多个`scoket`

> 俩次不安全，服务端无法通过客户端的SYN确定客户端具有收发数据的能力，需要再次进行`SYN`确定

**挥手四次：**

> 被动关闭方，收到`FIN`后对其进行`ACK`回复，但是不能直接关闭`scoket`，因为这时候用户可能正在处理数据(`scoket`接收缓存区中有可能还存在堆积的数据)，需要用户来确认什么时候关闭。
>
> `scoket`发送FIN,因为`ACK`和`FIN`不能放在一起

**如实三次握手失败，(服务端)如何处理？**

>服务端超时等待ACK之后，向客户端发送RST报文，然后释放新建的scoket资源

==SYN泛洪功能攻击==

**主动关闭方TIME_WAIT状态的作用：**

- **假设没有TIME_WAIT而是直接进入closed状态，释放scoket资源会造成的危害**



TCP的可靠传输：

连接管理，........


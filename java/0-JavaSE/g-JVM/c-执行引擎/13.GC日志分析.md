![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/imgs01/20200808144238.png)

## GCæ—¥å¿—å‚æ•°åˆ†æ

```java
public class _01PrintGCDetails {
    public static void main(String[] args) {
        ArrayList<byte[]> list = new ArrayList<>();
        for (int i = 0; i < 500; i++) {
            byte[] arr = new byte[1024 * 1024];
            list.add(arr);
        }
    }
}
```

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/imgs01/20200808144745.png)

```java
[GC (Allocation Failure) [DefNew: 3843K->512K(4928K), 0.0034569 secs] 3843K->2649K(15872K), 0.0043457 secs] [Times: user=0.02 sys=0.00, real=0.00 secs] 
[GC (Allocation Failure) [DefNew: 4738K->0K(4928K), 0.0038790 secs] 6875K->6745K(15872K), 0.0039024 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC (Allocation Failure) [DefNew: 4205K->0K(4928K), 0.0024967 secs] 10950K->10841K(15872K), 0.0025230 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC (Allocation Failure) [DefNew: 4220K->1K(4928K), 0.0038292 secs][Tenured: 14937K->14938K(15056K), 0.0015664 secs] 15061K->14938K(19984K), [Metaspace: 2252K->2252K(4480K)], 0.0055458 secs] [Times: user=0.02 sys=0.00, real=0.01 secs] 
[GC (Allocation Failure) [DefNew: 9435K->1027K(11264K), 0.0091230 secs] 24374K->24158K(36164K), 0.0091612 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] 
[GC (Allocation Failure) [DefNew: 10447K->1024K(11264K), 0.0075598 secs][Tenured: 32350K->32350K(33124K), 0.0017955 secs] 33578K->33374K(44388K), [Metaspace: 2279K->2279K(4480K)], 0.0095590 secs] [Times: user=0.00 sys=0.01, real=0.01 secs] 
[GC (Allocation Failure) [DefNew: 21373K->2072K(24320K), 0.0132403 secs] 53724K->52855K(78240K), 0.0132947 secs] [Times: user=0.00 sys=0.02, real=0.01 secs] 
[GC (Allocation Failure) [DefNew: 22954K->2048K(24320K), 0.0126333 secs][Tenured: 71288K->71288K(71396K), 0.0020584 secs] 73738K->73336K(95716K), [Metaspace: 2283K->2283K(4480K)], 0.0150118 secs] [Times: user=0.02 sys=0.00, real=0.01 secs] 
[GC (Allocation Failure) [DefNew: 46984K->5120K(53568K), 0.0272463 secs] 118272K->117369K(172384K), 0.0273079 secs] [Times: user=0.02 sys=0.01, real=0.03 secs] 
[GC (Allocation Failure) [DefNew: 52101K->5120K(53568K), 0.0294453 secs][Tenured: 158330K->158302K(158908K), 0.0266126 secs] 164350K->163422K(212476K), [Metaspace: 2283K->2283K(4480K)], 0.0563373 secs] [Times: user=0.05 sys=0.02, real=0.06 secs] 
[GC (Allocation Failure) [DefNew: 69947K->69947K(78656K), 0.0000182 secs][Tenured: 158302K->174687K(174784K), 0.0243151 secs] 228249K->227936K(253440K), [Metaspace: 2283K->2283K(4480K)], 0.0243971 secs] [Times: user=0.03 sys=0.00, real=0.03 secs] 
[Full GC (Allocation Failure) [Tenured: 174687K->174687K(174784K), 0.0027962 secs] 252803K->252513K(253440K), [Metaspace: 2283K->2283K(4480K)], 0.0028338 secs] [Times: user=0.02 sys=0.00, real=0.00 secs] 
[Full GC (Allocation Failure) [Tenured: 174687K->174670K(174784K), 0.0309642 secs] 252513K->252496K(253440K), [Metaspace: 2283K->2283K(4480K)], 0.0310148 secs] [Times: user=0.03 sys=0.00, real=0.03 secs] 
Heap
 def new generation   total 78656K, used 78148K [0x05600000, 0x0ab50000, 0x0ab50000)
  eden space 69952K, 100% used [0x05600000, 0x09a50000, 0x09a50000)
  from space 8704K,  94% used [0x09a50000, 0x0a251168, 0x0a2d0000)
  to   space 8704K,   0% used [0x0a2d0000, 0x0a2d0000, 0x0ab50000)
 tenured generation   total 174784K, used 174670K [0x0ab50000, 0x15600000, 0x15600000)
   the space 174784K,  99% used [0x0ab50000, 0x155e3850, 0x155e3a00, 0x15600000)
 Metaspace       used 2303K, capacity 2344K, committed 2368K, reserved 4480K
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at gc.logs._01PrintGCDetails.main(_01PrintGCDetails.java:14)
```

**ã€å‚æ•°è§£æã€‘**

- GCã€Full GCï¼š GCçš„ç±»å‹
  
   - GCåªåœ¨æ–°ç”Ÿä»£ä¸Šè¿›è¡Œ
  
   - Full GCåŒ…æ‹¬æ°¸ä¹…ä»£(å…ƒç©ºé—´)ï¼Œæ–°ç”Ÿä»£ï¼Œ è€å¹´ä»£

- `Allocation Failure`ï¼š GCå‘ç”Ÿçš„åŸå› ï¼Œå³å†…å­˜åˆ†é…å¤±è´¥

- `21373K->2072K`ï¼šå †åœ¨GCå‰çš„ä½¿ç”¨å¤§å°å’ŒGCåçš„ä½¿ç”¨å¤§å°

- `78656K`ï¼šå †ç©ºé—´çš„æ€»å¤§å°

- `0.0273079 secs`ï¼š GCè€—æ—¶

- `PSYoungGen`ï¼šè¡¨ç¤ºå½“å‰ä½¿ç”¨äº†Parallel Scavengeå¹¶è¡Œåƒåœ¾æ”¶é›†å™¨è¿›è¡Œæ–°ç”Ÿä»£å›æ”¶

- `ParOldGen`ï¼šè¡¨ç¤ºå½“å‰ä½¿ç”¨äº†Parallel Oldå¹¶è¡Œåƒåœ¾æ”¶é›†å™¨è¿›è¡Œè€å¹´ä»£å›æ”¶

- `Metaspace`ï¼š å…ƒæ•°æ®åŒºGCå‰åå¤§å°çš„å˜åŒ–ï¼ŒJDK1.8ä¸­å¼•å…¥äº†å…ƒæ•°æ®åŒºä»¥æ›¿ä»£æ°¸ä¹…ä»£

- `Times`ï¼š userï¼š æŒ‡çš„æ˜¯åƒåœ¾æ”¶é›†å™¨èŠ±è´¹çš„æ‰€æœ‰CPUæ—¶é—´ï¼Œsysï¼šèŠ±è´¹åœ¨ç­‰å¾…ç³»ç»Ÿè°ƒç”¨æˆ–ç³»ç»Ÿäº‹ä»¶çš„æ—¶é—´ï¼Œrealï¼šGCä»å¼€å§‹åˆ°ç»“æŸçš„æ—¶é—´ï¼ŒåŒ…æ‹¬å…¶ä»–è¿›ç¨‹å ç”¨æ—¶é—´ç‰‡çš„å®é™…æ—¶é—´

- `Heap`ï¼šæ•´ä¸ªå †å†…å­˜çš„è¯¦ç»†ä½¿ç”¨ä»¥åŠå›æ”¶æƒ…å†µ

**ã€åƒåœ¾å›æ”¶å™¨è¯´æ˜ã€‘**

- Serialæ”¶é›†å™¨åœ¨æ–°ç”Ÿä»£çš„åå­—æ˜¯De fault New Generationï¼Œ å› æ­¤æ˜¾ç¤ºçš„æ˜¯" DefNew"

- ParNewæ”¶é›†å™¨åœ¨æ–°ç”Ÿä»£çš„åå­—ä¼šå˜æˆ" ParNew"ï¼Œæ„æ€æ˜¯"Parallel New Generation"

- Parallel Scavengeæ”¶ é›†å™¨åœ¨æ–°ç”Ÿä»£çš„åå­—æ˜¯" PSYoungGen"

- G1æ”¶é›†å™¨ï¼Œä¼šæ˜¾ç¤ºä¸º"garbage-first heap"

"[GC"å’Œ"[Full GC"è¯´æ˜äº†è¿™æ¬¡åƒåœ¾æ”¶é›†çš„åœé¡¿ç±»å‹ï¼Œå¦‚æœæœ‰"Full"åˆ™è¯´æ˜GCå‘ç”Ÿäº†"Stop The World

è€å¹´ä»£çš„æ”¶é›†å’Œæ–°ç”Ÿä»£é“ç†ä¸€æ ·ï¼Œåå­—ä¹Ÿæ˜¯æ”¶é›†å™¨å†³å®šçš„

## æ—¥å¿—åˆ†æå·¥å…·

å¯ä»¥ç”¨ä¸€äº›å·¥å…·å»åˆ†æè¿™äº›GCæ—¥å¿—

å¸¸ç”¨çš„æ—¥å¿—åˆ†æå·¥å…·æœ‰ï¼š

GCVIewerã€ GREasyã€ GCHistoã€ GCLogViewerã€ Hp jmeterã€ garbagecatç­‰......

**GReasyæ—¥å¿—åˆ†æ**

> ğŸ‘‰[**GReasy**](https://gceasy.io/)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/imgs01/20200808152324.png)

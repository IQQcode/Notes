## 1. è™šæ‹Ÿæœºæ ˆæ¦‚è¿°

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200625092209.png)

### è™šæ‹Ÿæœºæ ˆå‡ºç°èƒŒæ™¯

ç”±äºè·¨å¹³å°æ€§çš„è®¾è®¡ï¼ŒJavaæŒ‡ä»¤éƒ½æ˜¯**åŸºäºæ ˆ**ï¼ˆ8ä½å¯¹é½ï¼‰æ¥è®¾è®¡çš„ã€‚ä¸åŒå¹³å°çš„CPUæ¶æ„ä¸åŒï¼Œæ‰€ä»¥ä¸èƒ½è®¾è®¡ä¸ºåŸºäºå¯„å­˜å™¨çš„ï¼ˆ16ä½ä¸ºå¯¹é½ï¼‰ã€‚

ã€åŸºäºæ ˆçš„ä¼˜åŠ¿ã€‘ï¼šè·¨å¹³å°ï¼ŒæŒ‡ä»¤é›†å°ï¼Œç¼–è¯‘å™¨å®¹æ˜“å®ç°ï¼›

ã€åŠ£åŠ¿ã€‘ï¼šæ€§èƒ½ä¸‹é™ï¼Œå®ç°çš„åŒæ ·çš„åŠŸèƒ½æŒ‡ä»¤å¤š

### å†…å­˜ä¸­çš„æ ˆä¸å †

<font color = red>**æ ˆæ˜¯è¿è¡Œæ—¶çš„å•ä½ï¼Œå †æ˜¯å­˜å‚¨æ—¶çš„å•ä½ã€‚**</font>

- è™šæ‹Ÿæœºæ ˆè§£å†³ç¨‹åºçš„è¿è¡Œé—®é¢˜ï¼Œç¨‹åºæ‰§è¡Œæœ€ç»ˆéƒ½æ˜¯å‹å…¥è™šæ‹Ÿæœºæ ˆçš„æ ˆå¸§ä¸­

- å †è§£å†³çš„æ˜¯æ•°æ®å­˜å‚¨é—®é¢˜ï¼Œï¼ˆé™¤å»åŸºæœ¬ç±»å‹ä¹‹å¤–ï¼‰ä¸»ä½“æ•°æ®å‡æ˜¯å­˜å‚¨åœ¨å †ä¸Š

> å°±å¥½æ¯”æ˜¯æˆ‘ä»¬ç”µè„‘çš„å†…å­˜å’Œç¡¬ç›˜ï¼Œç¨‹åºçš„æ‰§è¡Œéƒ½éœ€è¦åŠ è½½åˆ°å†…å­˜ä¸­æ¥è¿è¡Œã€‚ä½†æ˜¯ä¿å­˜æ•°æ®éƒ½æ˜¯æŒä¹…åŒ–åœ¨ç¡¬ç›˜ä¸Šçš„ï¼Œç¡¬ç›˜ä¸­çš„æ•°æ®éœ€è¦è¯»å–åˆ°å†…å­˜ä¸­æ‰èƒ½æ‰§è¡Œã€‚

### è™šæ‹Ÿæœºæ ˆçš„åŸºæœ¬å†…å®¹

ã€ä½œç”¨ã€‘ï¼šç®¡ç†Javaç¨‹åºçš„è¿è¡Œï¼Œä¿å­˜æ–¹æ³•çš„å±€éƒ¨å˜é‡ã€éƒ¨åˆ†ç»“æœï¼Œå‚ä¸æ–¹æ³•çš„è°ƒç”¨å’Œè¿”å›

ã€ç”Ÿå‘½å‘¨æœŸã€‘ï¼šä¸çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸç›¸åŒ

ã€ç‰¹ç‚¹ã€‘

- è®¿é—®é€Ÿåº¦ä»…æ¬¡äºPCè®¡æ•°å™¨ï¼ˆåªæ¶‰åŠåˆ°å…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œï¼‰

- ä¸å­˜åœ¨åƒåœ¾å›æ”¶é—®é¢˜

> ä¼šå­˜åœ¨OOMå’ŒStackOverflow

### å‡ºç°çš„å¼‚å¸¸

Javaè™šæ‹Ÿæœºè§„èŒƒå…è®¸<font color = red>Javaæ ˆçš„å¤§å°æ˜¯åŠ¨æ€çš„æˆ–è€…å›ºå®šä¸å˜çš„</font>

ã€ŠJavaè™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­è§„å®šäº†ä¸¤ç±»å¼‚å¸¸çŠ¶å†µï¼š

- å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆçš„æ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æœ€å¤§æ·±åº¦ï¼ŒæŠ›å‡º`StackOverflowError`

- å¦‚æœJavaè™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œå¹¶ä¸”åœ¨å°è¯•æ‰©å±•çš„æ—¶å€™æ— æ³•ä¸­è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ï¼Œæˆ–è€…åœ¨åˆ›å»ºæ–°çš„çº¿ç¨‹æ—¶æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜å»åˆ›å»ºå¯¹åº”çš„è™šæ‹Ÿæœºæ ˆï¼Œé‚£JVMå°†ä¼šæŠ›å‡º`OutOfMemoryError`å¼‚å¸¸

> HotSpotè™šæ‹Ÿæœºæ ˆå®¹é‡ä¸å¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œä½†æ˜¯ç”³è¯·å¤±è´¥æ˜¯ä»ä¼šäº§ç”ŸOOM

ã€æ‰‹åŠ¨è®¾ç½®è™šæ‹Ÿæœºæ ˆçš„å®¹é‡å¤§å°ã€‘

- `-Xss256k`ï¼ˆå•ä½ä¸ºkã€mã€gï¼Œå¿½ç•¥å¤§å°å†™ï¼‰

----------------------------------------------------

## 2. è™šæ‹Ÿæœºæ ˆçš„å†…éƒ¨ç»“æ„

### æ ˆä¸­å­˜å‚¨ä»€ä¹ˆ

è™šæ‹Ÿæœºæ ˆçš„åŸºæœ¬å•å…ƒæ˜¯**æ ˆå¸§**ï¼ˆStack Frameï¼‰ï¼Œä¸€ä¸ªæ ˆå¸§å¯¹åº”ä¸€ä¸ªJavaæ–¹æ³•çš„è°ƒç”¨

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200625150543.png)

ã€æ‰§è¡ŒåŸç†ã€‘

ç”±äºè™šæ‹Ÿæœºæ ˆæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œä¸åŒçš„çº¿ç¨‹æœ‰ä¸åŒçš„æ ˆï¼Œä¸åŒçš„æ ˆä¹‹é—´æ•°æ®ä¸èƒ½å…±äº«ã€‚å³ä¸å¯èƒ½å­˜åœ¨ä¸€ä¸ªæ ˆå¸§ä¸­å¼•ç”¨å¦å¤–ä¸€ä¸ªçº¿ç¨‹çš„æ ˆå¸§ã€‚å®ƒä»¬å¯ä»¥é€šè¿‡åŒä¸€ä¸ªè¿›ç¨‹æ¥å…±äº«æ•°æ®ã€‚

**Javaæ–¹æ³•æœ‰ä¸¤ç§è¿”å›å‡½æ•°çš„æ–¹å¼ï¼š** 

- ä¸€ç§æ˜¯æ­£å¸¸çš„å‡½æ•°è¿”å›ï¼Œä½¿ç”¨`return`æŒ‡ä»¤ï¼›

- å¦å¤–ä¸€ç§æ˜¯æŠ›å‡ºå¼‚å¸¸

> ä¸ç®¡ä½¿ç”¨å“ªç§æ–¹å¼ï¼Œéƒ½ä¼šå¯¼è‡´æ ˆå¸§è¢«å¼¹å‡º

### æ ˆå¸§çš„å†…éƒ¨æ•°æ®

**æ¯ä¸ªæ ˆå¸§ä¸­å­˜å‚¨ç€5éƒ¨åˆ†æ•°æ®ï¼š**

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200625173710.png)

- å±€éƒ¨å˜é‡è¡¨ï¼ˆLocal Variablesï¼‰

- æ“ä½œæ•°æ ˆï¼ˆOperand Stackï¼‰

- åŠ¨æ€é“¾æ¥ï¼ˆDynamic Linkingï¼‰

- æ–¹æ³•è¿”å›åœ°å€ï¼ˆReturn Addressï¼‰

- é™„åŠ ä¿¡æ¯

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†åˆ«è®¨è®ºè¿™5éƒ¨åˆ†çš„ä½œç”¨

-----------------------------

## 3. å±€éƒ¨å˜é‡è¡¨

å±€éƒ¨å˜é‡è¡¨Local Variablesï¼ˆå±€éƒ¨å˜é‡æ•°ç»„æˆ–è€…æœ¬åœ°å˜é‡è¡¨ï¼‰ã€‚

1. å±€éƒ¨å˜é‡è¡¨æ˜¯ä¸€ä¸ª<font color = pink>æ•°å­—æ•°ç»„</font>ï¼Œä¸»è¦ç”¨äºå­˜å‚¨æ–¹æ³•å‚æ•°å’Œå®šä¹‰åœ¨æ–¹æ³•ä½“å†…çš„å±€éƒ¨å˜é‡ã€‚
   
    - æ•°æ®ç±»å‹åŒ…æ‹¬ï¼šåŸºæœ¬æ•°æ®ç±»å‹ã€å¼•ç”¨ç±»å‹ã€è¿”å›å€¼ç±»å‹

2. çº¿ç¨‹ç§æœ‰æ•°æ®ï¼Œä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜

3. å±€éƒ¨å˜é‡è¡¨çš„å®¹é‡å¤§å°åœ¨<font color = pink>ç¼–è¯‘æœŸé—´</font>è¢«ç¡®å®šï¼Œåœ¨æ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜ï¼ˆæ•°ç»„ï¼‰

ä½¿ç”¨ jclasslibæ’ä»¶æŸ¥çœ‹outåŒ…ä¸‹åç¼–è¯‘åçš„å­—èŠ‚ç æ–‡ä»¶

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200625191813.png)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200625192601.png)

mainæ–¹æ³•å¯¹åº”çš„å­—èŠ‚ç æ–‡ä»¶

```java
 0 new #1 <iqqcode/jvmstack/LocalVariablesTest01>
 3 dup
 4 invokespecial #2 <iqqcode/jvmstack/LocalVariablesTest01.<init>>
 7 astore_1
 8 bipush 10
10 istore_2
11 aload_1
12 invokevirtual #3 <iqqcode/jvmstack/LocalVariablesTest01.test1>
15 return
```

```java
package iqqcode.jvmstack;

import java.util.Date;

/**
 * @Author: Mr.Q
 * @Date: 2020-06-25 09:39
 * @Description:å±€éƒ¨å˜é‡è¡¨å®¹é‡æµ‹è¯•
 */
public class LocalVariablesTest01 {
    private int count = 0;

    public static void main(String[] args) {
        LocalVariablesTest01 test = new LocalVariablesTest01();
        int num = 10;
        test.test1();
    }

    public static void testStatic(){
        LocalVariablesTest01 test = new LocalVariablesTest01();
        Date date = new Date();
        int count = 10;
        System.out.println(count);
        //å› ä¸ºthiså˜é‡ä¸å­˜åœ¨äºå½“å‰æ–¹æ³•çš„å±€éƒ¨å˜é‡è¡¨ä¸­ï¼ï¼
        //System.out.println(this.count);
    }

    //å…³äºSlotçš„ä½¿ç”¨çš„ç†è§£
    public LocalVariablesTest01(){
        this.count = 1;
    }

    public void test1() {
        Date date = new Date();
        String name1 = "iqqcode";
        test2(date, name1);
        System.out.println(date + name1);
    }

    public String test2(Date dateP, String name2) {
        dateP = null;
        name2 = "Mr.Q";
        double weight = 130.5;//å æ®ä¸¤ä¸ªslot
        char gender = 'ç”·';
        return dateP + name2;
    }

    public void test3() {
        this.count++;
    }

    public void test4() {
        int a = 0;
        {
            int b = 0;
            b = a + 1;
        }
        //å˜é‡cä½¿ç”¨ä¹‹å‰å·²ç»é”€æ¯çš„å˜é‡bå æ®çš„slotçš„ä½ç½®
        int c = a + 1;
    }

    public void test5Temp() {
        int num;
        //System.out.println(num);//é”™è¯¯ä¿¡æ¯ï¼šå˜é‡numæœªè¿›è¡Œåˆå§‹åŒ–
    }
}
```

**æ§½Slotï¼š**

æ•°å­—æ•°ç»„ä¸­å­˜æ”¾æ³•çš„æ•°æ®ç±»å‹åŒ…æ‹¬ï¼šåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆbooleanã€byteã€charã€shortã€intã€floatã€longã€doubleï¼‰ã€å¼•ç”¨ç±»å‹ï¼ˆreferenceå¼•ç”¨æŒ‡é’ˆç±»å‹ï¼‰ã€è¿”å›å€¼ç±»å‹ï¼ˆreturnAddressæŒ‡å‘å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼‰

å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…å­˜ç©ºé—´åœ¨ç¼–è¯‘æœŸé—´å®Œæˆåˆ†é…ï¼Œå½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨å¸§ä¸­åˆ†é…å¤šå¤§çš„å±€éƒ¨å˜é‡ç©ºé—´æ˜¯å®Œå…¨ç¡®å®šçš„ï¼Œåœ¨æ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡è¡¨çš„å¤§å°ã€‚

> å±€éƒ¨å˜é‡è¡¨å’Œæ“ä½œæ•°æ ˆåº•å±‚éƒ½æ˜¯é‡‡ç”¨æ•°ç»„å®ç°çš„ï¼Œæ‰€ä»¥ä¸€æ—¦åˆå§‹åŒ–åï¼Œé•¿åº¦æ˜¯å›ºå®šä¸å˜çš„

è¿™äº›æ•°æ®ç±»å‹åœ¨å±€éƒ¨å˜é‡è¡¨ä¸­çš„å­˜å‚¨ç©ºé—´ç”¨å±€éƒ¨**å˜é‡æ§½ï¼ˆSlotï¼‰**æ¥è¡¨ç¤ºï¼Œ`long`å’Œ`double`æ˜¯64ä½å ä¸¤ä¸ªæ§½ï¼Œå…¶ä½™å ä¸€ä¸ªã€‚

> æ‰€ä»¥å±€éƒ¨å˜é‡è¡¨çš„å®¹é‡å°±æ˜¯æ§½çš„ä¸ªæ•°ï¼Œåœ¨ç¼–è¯‘æœŸé—´å°±æ˜¯ç¡®å®šçš„

<mark>**å˜é‡çš„åˆ†ç±»ï¼š**</mark>

ä¸€ã€æŒ‰ç…§æ•°æ®ç±»å‹åˆ†ï¼šâ‘  åŸºæœ¬æ•°æ®ç±»å‹  â‘¡ å¼•ç”¨æ•°æ®ç±»å‹  

äºŒã€æŒ‰ç…§åœ¨ç±»ä¸­å£°æ˜çš„ä½ç½®åˆ†ï¼š

â‘  æˆå‘˜å˜é‡ï¼šåœ¨ä½¿ç”¨å‰ï¼Œéƒ½ç»å†è¿‡é»˜è®¤åˆå§‹åŒ–èµ‹å€¼ 

- ç±»å˜é‡ï¼š Linkingçš„`Prepare`é˜¶æ®µï¼šç»™ç±»å˜é‡é»˜è®¤èµ‹å€¼ ====> initialé˜¶æ®µï¼šç»™ç±»å˜é‡æ˜¾å¼èµ‹å€¼

- å®ä¾‹å˜é‡ï¼šéšç€å¯¹è±¡çš„åˆ›å»ºï¼Œä¼šåœ¨å †ç©ºé—´ä¸­åˆ†é…å®ä¾‹å˜é‡ç©ºé—´ï¼Œå¹¶è¿›è¡Œé»˜è®¤èµ‹å€¼ 

â‘¡ å±€éƒ¨å˜é‡ï¼šåœ¨ä½¿ç”¨å‰ï¼Œå¿…é¡»è¦è¿›è¡Œæ˜¾å¼èµ‹å€¼çš„ï¼å¦åˆ™ï¼Œç¼–è¯‘ä¸é€šè¿‡

---------------------------------------

## 4. æ“ä½œæ•°æ ˆ

æ ˆå¸§ä¸­å­˜å‚¨çš„ç¬¬äºŒéƒ¨åˆ†æ•°æ®----æ“ä½œæ•°æ ˆOperand Stackï¼ˆä¹Ÿç§°è¡¨è¾¾å¼æ ˆï¼‰ã€‚

**ä¸»è¦ç”¨æ¥ä¿å­˜è®¡ç®—è¿‡ç¨‹çš„ä¸­é—´ç»“æœï¼ŒåŒæ—¶ä½œä¸ºè®¡ç®—è¿‡ç¨‹ä¸­ å˜é‡ä¸´æ—¶çš„å­˜å‚¨ç©ºé—´ã€‚**

æ“ä½œæ•°æ ˆå¯¹äºæ•°æ®çš„å­˜å‚¨è·Ÿå±€éƒ¨å˜é‡è¡¨æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯è·Ÿå±€éƒ¨å˜é‡è¡¨ä¸åŒçš„æ˜¯ï¼Œæ“ä½œæ•°æ ˆå¯¹äºæ•°æ®çš„è®¿é—®ä¸æ˜¯é€šè¿‡ä¸‹æ ‡ï¼Œè€Œæ˜¯**é€šè¿‡æ ‡å‡†çš„æ ˆæ“ä½œæ¥è¿›è¡Œçš„ï¼ˆå‹å…¥ä¸å¼¹å‡ºï¼‰**

å¯¹äºæ•°æ®çš„è®¡ç®—æ˜¯ç”±CPUå®Œæˆçš„ï¼Œæ‰€ä»¥CPUåœ¨æ‰§è¡ŒæŒ‡ä»¤æ—¶æ¯æ¬¡ä¼šä»æ“ä½œæ•°æ ˆä¸­å¼¹å‡ºæ‰€éœ€çš„æ“ä½œæ•°ï¼Œç»è¿‡è®¡ç®—åå†å‹å…¥åˆ°æ“ä½œæ•°æ ˆé¡¶ã€‚

> å¦å¤–ï¼Œæˆ‘ä»¬è¯´Javaè™šæ‹Ÿæœºçš„è§£é‡Šå¼•æ“æ˜¯åŸºäºæ ˆçš„æ‰§è¡Œå¼•æ“ï¼Œå…¶ä¸­çš„æ ˆæŒ‡çš„å°±æ˜¯æ“ä½œæ•°æ ˆã€‚

æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¿›è¡Œä»£ç è¿½è¸ªåˆ†æï¼š

```java
public class PCRegisterTest {
    public static void main(String[] args) {
        int i = 10;
        int j = 20;
        int k = i + j;
    }
}
```

åç¼–è¯‘ä¹‹åçš„ä¸»ä½“ä»£ç ï¼š

```java
{
  public iqqcode.pcregister.PCRegisterTest();
    descriptor: ()V
    flags: ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object."<init>":()V
         4: return
      LineNumberTable:
        line 8: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       5     0  this   Liqqcode/pcregister/PCRegisterTest;

  public static void main(java.lang.String[]);
    descriptor: ([Ljava/lang/String;)V
    flags: ACC_PUBLIC, ACC_STATIC
    Code:
      stack=2, locals=4, args_size=1
         0: bipush        10
         2: istore_1
         3: bipush        20
         5: istore_2
         6: iload_1
         7: iload_2
         8: iadd
         9: istore_3
        10: return
      LineNumberTable:
        line 10: 0
        line 11: 3
        line 12: 6
        line 13: 10
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0      11     0  args   [Ljava/lang/String;
            3       8     1     i   I
            6       5     2     j   I
           10       1     3     k   I
}
SourceFile: "PCRegisterTest.java"
```

æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œè·Ÿè¸ªåˆ†æ

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626160202.png)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626160256.png)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626153841.png)

å¯¹ç…§å­—èŠ‚ç æŒ‡ä»¤ï¼Œæˆ‘ä»¬é€è¡Œåˆ†æï¼š

åˆå§‹æƒ…å†µ

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626173734.png)

I. æ ¹æ®PCè®¡æ•°å™¨è®°å½•çš„ä»£ç åç§»ä½ç½®0ï¼Œæ“ä½œæ•°10å…¥æ ˆ

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626173811.png)

II. æ ¹æ®PCè®¡æ•°å™¨è®°å½•çš„ä»£ç åç§»ä½ç½®2ï¼Œæ“ä½œæ•°10å‡ºæ ˆæ”¾å…¥åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­ç´¢å¼•ä¸º1çš„ä½ç½®å¤„

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626173841.png)

III. æ ¹æ®PCè®¡æ•°å™¨è®°å½•çš„ä»£ç åç§»ä½ç½®3ï¼Œæ“ä½œæ•°20å…¥æ ˆ

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626173955.png)

IV. æ ¹æ®PCè®¡æ•°å™¨è®°å½•çš„ä»£ç åç§»ä½ç½®5ï¼Œæ“ä½œæ•°20å‡ºæ ˆæ”¾å…¥åˆ°å±€éƒ¨å˜é‡è¡¨ä¸­ç´¢å¼•ä¸º2çš„ä½ç½®å¤„

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626174009.png)

V. ä»å±€éƒ¨å˜é‡è¡¨ä¸­å–å‡ºç´¢å¼•1ä½ç½®çš„æ•°(10)ï¼Œæ”¾å…¥åˆ°æ“ä½œæ•°æ ˆä¸­

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626174030.png)

VI. ä»å±€éƒ¨å˜é‡è¡¨ä¸­å–å‡ºç´¢å¼•2ä½ç½®çš„æ•°(20)ï¼Œæ”¾å…¥åˆ°æ“ä½œæ•°æ ˆä¸­

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626174049.png)

VII. å°†ä¸¤ä¸ªæ“ä½œæ•°å‡ºæ ˆç›¸åŠ ååŠ è¿‡å†å…¥æ ˆ

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626174108.png)

VIII. æ“ä½œæ•°30æ”¾å…¥å±€éƒ¨å˜é‡è¡¨ç´¢å¼•ä¸º3çš„ä½ç½®å¤„

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200626174247.png)

IX. æ–¹æ³•ç»“æŸè¿”å›ï¼ˆè¿”å›ä¸ºç©ºï¼‰

----------------------------

## 5. åŠ¨æ€é“¾æ¥

**åŠ¨æ€é“¾æ¥ã€æ–¹æ³•è¿”å›åœ°å€ã€é™„åŠ ä¿¡æ¯ç»Ÿç§°ä¸ºå¸§æ•°æ®åŒº**

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200628130131.png)

åŠ¨æ€é“¾æ¥Dynaminc Linkingï¼ˆæˆ–**æŒ‡å‘<mark>è¿è¡Œæ—¶å¸¸é‡æ± </mark>çš„æ–¹æ³•å¼•ç”¨**ï¼‰ã€‚

åœ¨Javaæºæ–‡ä»¶è¢«ç¼–è¯‘æˆå­—èŠ‚ç æ–‡ä»¶æ—¶ï¼Œæ‰€æœ‰çš„å˜é‡å’Œæ–¹æ³•å¼•ç”¨éƒ½ä½œä¸ºç¬¦å·å¼•ç”¨ï¼ˆSysmbolic Referenceï¼‰ ä¿å­˜åˆ°classæ–‡ä»¶çš„ å¸¸é‡æ± ä¸­ã€‚æè¿°ä¸€ä¸ªæ–¹æ³•è°ƒç”¨äº†å…¶ä»–æ–¹æ³•æ—¶ï¼Œå°±æ˜¯é€šè¿‡å¸¸é‡æ± ä¸­æŒ‡å‘æ–¹æ³•çš„ç¬¦å·å¼•ç”¨æ¥è¡¨ç¤ºçš„ã€‚

**åŠ¨æ€é“¾æ¥çš„ä½œç”¨å°±æ˜¯ä¸ºäº†å°†ç¬¦å·å¼•ç”¨è½¬æ¢ä¸ºç›´æ¥å¼•ç”¨**

**ã€ç¬¦å·å¼•ç”¨ä¸ç›´æ¥å¼•ç”¨ã€‘**

- ç¬¦å·å¼•ç”¨å°±æ˜¯å¸¸é‡æ± ä¸­çš„ä¸€ä¸ªå­—ç¬¦ä¸²
- ç›´æ¥å¼•ç”¨æ˜¯æŒ‡å‘æ–¹æ³•çš„çœŸæ­£çš„å…¥å£

è¿™ä¸å°±å’Œç±»åŠ è½½ç³»ç»Ÿä¸­é“¾æ¥é˜¶æ®µçš„è§£æResolveè¿‡ç¨‹ç±»ä¼¼ä¹ˆğŸ˜’ï¼

> **è§£æResolve**ï¼šå°†<mark>å¸¸é‡æ± </mark>å†…çš„ç¬¦å·å¼•ç”¨è½¬ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹

æˆ‘ä»¬æ˜¯å…ˆé€šè¿‡ç±»åŠ å™¨å°†ç±»åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œæ­¤æ—¶classæ–‡ä»¶ä¸­ä¾¿å­˜åœ¨äº†å¸¸é‡æ± Constant Poolã€‚

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200628092126.png)

ç¼–è¯‘ä¹‹åç”Ÿæˆçš„`.class`æ–‡ä»¶çš„å¸¸é‡æ± ä¸­å­˜åœ¨ç€å¤§é‡çš„ç¬¦å·å¼•ç”¨

- è¿™äº›ç¬¦å·å¼•ç”¨**ä¸€éƒ¨åˆ†åœ¨ç±»åŠ è½½è¿‡ç¨‹çš„è§£æé˜¶æ®µè¢«JVMè½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨**ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±è¢«ç§°ä¸ºè§£æï¼ˆé™æ€è§£æï¼‰
- è€Œ**å‰©ä¸‹çš„ä¸€éƒ¨åˆ†ç¬¦å·å¼•ç”¨åœ¨æ¯ä¸€æ¬¡è¿è¡Œçš„æ—¶å€™åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­è¢«JVMè½¬åŒ–ä¸ºç›´æ¥å¼•ç”¨**ï¼Œè¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºåŠ¨æ€è¿æ¥

åŒºåˆ«å°±æ˜¯

1. <font color = #E86262>ã€ä½ç½®ä¸åŒã€‘</font>

- åŠ¨æ€é“¾æ¥æŒ‡å‘çš„æ˜¯**æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± **
- è§£ææŒ‡å‘çš„æ˜¯**classæ–‡ä»¶ä¸­çš„å¸¸é‡æ± **

2. <font color = #E86262>ã€æ—¶é—´ä¸åŒã€‘</font>

- åŠ¨æ€é“¾æ¥æ˜¯åœ¨å­—èŠ‚ç è§£é‡Šæ‰§è¡Œæ—¶
- è§£ææ˜¯åœ¨ç±»åŠ è½½æ—¶


![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200628092307.png)



----------------------------------------

## 6. æ–¹æ³•è¿”å›åœ°å€

æ–¹æ³•è¿”å›åœ°å€Return Addressï¼Œå­˜æ”¾è¯¥æ–¹æ³•çš„PCå¯„å­˜å™¨çš„å€¼

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200628130131.png)

ä¸€ä¸ªæ–¹æ³•çš„ç»“æŸï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š

+ æ­£å¸¸æ‰§è¡Œå®Œæˆ

+ å‡ºç°æœªå¤„ç†çš„å¼‚å¸¸ï¼Œéæ­£å¸¸é€€å‡º

æ–¹æ³•æ­£å¸¸é€€å‡ºï¼Œæ–¹æ³•è°ƒç”¨è€…çš„PCå¯„å­˜å™¨çš„å€¼ä½œä¸ºè¿”å›åœ°å€ï¼›

æ–¹æ³•å¼‚å¸¸ç»“æŸï¼Œè¿”å›åœ°å€é€šè¿‡å¼‚å¸¸è¡¨æ¥ç¡®å®šï¼Œæ ˆå¸§ä¸­ä¸ä¼šå­˜å‚¨è¿™éƒ¨åˆ†ä¿¡æ¯

--------------------------------------------------

## 7. é™„åŠ ä¿¡æ¯

æ ˆå¸§ä¸­è¿˜å…è®¸æºå¸¦ä¸Javaè™šæ‹Ÿæœºå®ç°ç›¸å…³çš„ä¸€äº›é™„åŠ ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå¯¹ç¨‹åºè°ƒè¯•æä¾›æ”¯æŒçš„ä¿¡æ¯ã€‚

## 1. é¢˜ç›®æè¿°

> ğŸ‘‰[33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„](https://leetcode-cn.com/problems/search-in-rotated-sorted-array/)

å‡è®¾æŒ‰ç…§**å‡åºæ’åº**çš„æ•°ç»„åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªç‚¹ä¸Šè¿›è¡Œäº†æ—‹è½¬ã€‚

( ä¾‹å¦‚ï¼Œæ•°ç»„ [0,1,2,4,5,6,7] å¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] )ã€‚

æœç´¢ä¸€ä¸ªç»™å®šçš„ç›®æ ‡å€¼ï¼Œå¦‚æœæ•°ç»„ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ï¼Œåˆ™è¿”å›å®ƒçš„ç´¢å¼•ï¼Œå¦åˆ™è¿”å› -1 ã€‚

ä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­ä¸å­˜åœ¨é‡å¤çš„å…ƒç´ ã€‚

**ä½ çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦å¿…é¡»æ˜¯ O(log n) çº§åˆ«ã€‚**

ç¤ºä¾‹ 1:

> è¾“å…¥: nums = [4,5,6,7,0,1,2], target = 0
>
> è¾“å‡º: 4

ç¤ºä¾‹ 2:

> è¾“å…¥: nums = [4,5,6,7,0,1,2], target = 3
>
> è¾“å‡º: -1

## 2. è§£é¢˜æ€è·¯

è‡ªå·±èƒ½æƒ³åˆ°çš„è§£é¢˜æ€è·¯ï¼š

- æš´åŠ›æšä¸¾ï¼ˆæ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼‰
- äºŒåˆ†æŸ¥æ‰¾ï¼ˆè‡ªå·±å†™æ—¶è¾¹ç•Œæ¡ä»¶æ²¡åˆ†ææ¸…æ¥šï¼‰

### é¢˜ç›®åˆ†æ

é¦–å…ˆï¼Œè¯¥æ•°ç»„æ•°**æœ‰åºçš„æ•°ç»„**ï¼Œåœ¨æŸä¸€ç‚¹å¤„è¿›è¡Œäº†æ—‹è½¬ï¼Œé‚£ä¹ˆæ•°ç»„å°†è¢«åˆ†å‰²æˆä¸¤éƒ¨åˆ†ï¼Œ**å‡ä¸ºå•è°ƒé€’å¢**

å¯èƒ½åŒ…å«çš„æƒ…å†µæ— éå°±æ˜¯è¿™ä¸¤ç§ï¼š

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200719193625.png)

### äºŒåˆ†å¥—ç”¨

é¦–å…ˆæ¥å›é¡¾ä¸€ä¸‹äºŒåˆ†æŸ¥æ‰¾

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200719193255.png)

é‚£è¿™è¦æ€ä¹ˆå¥—ç”¨äºŒåˆ†æŸ¥æ‰¾çš„æ¨¡æ¿å‘¢ï¼Ÿ

**å…³é”®ç‚¹å°±æ˜¯ç¡®å®šæŸ¥æ‰¾çš„åŒºé—´ï¼Œmidæ‰€åœ¨çš„æŸä¸€ä¸ªå­åŒºé—´ä¸€å®šæ˜¯æœ‰åºçš„**

- æƒ…å†µä¸€ï¼Œ`mid`åœ¨å…¶å·¦è¾¹åŒºé—´æœ‰åºï¼›æƒ…å†µäºŒï¼Œ`mid`åœ¨å…¶å³è¾¹åŒºé—´æœ‰åºï¼›
- å¦‚ä½•ç¡®å®šå…¶åœ¨å“ªè¾¹æœ‰åºå‘¢ï¼Ÿå› ä¸ºæ˜¯**å‡åºçš„æ—‹è½¬äº†çš„æ•°ç»„**ï¼Œå•çº¯çš„é€šè¿‡`mid`æ˜¯æ— æ³•ç¡®è®¤çš„ã€‚æˆ‘ä»¬å¯ä»¥å‘ç°å¯ä»¥é€šè¿‡æ¯”è¾ƒ`nums[mid] ? nums[left]`çš„å…³ç³»æ¥ç¡®è®¤ï¼ˆå’Œnums[right]æ¯”ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼‰

**ã€æ¯”è¾ƒçš„è¿‡ç¨‹æ­¥éª¤å¦‚ä¸‹ã€‘**

1. å…ˆæ ¹æ® `nums[mid]` ä¸ `nums[left]` çš„å…³ç³»åˆ¤æ–­ `mid` æ˜¯åœ¨å·¦æ®µè¿˜æ˜¯å³æ®µã€‚ç›´è§‚çš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯äºŒåˆ†çš„ç¬¬ä¸€æ­¥ã€‚
2. ç„¶åï¼Œæˆ‘ä»¬å†å»ç¡®è®¤`target`æ˜¯åœ¨ `mid` çš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ï¼Œä»è€Œè°ƒæ•´å·¦å³è¾¹ç•Œï¼ˆæœ‰åºè¾¹ç•Œè‡ªç„¶ç”¨äºŒåˆ†ï¼Œé‚£æ— åºçš„æ€ä¹ˆå¤„ç†ï¼Ÿï¼‰
3. åˆ—å‡ºæ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼ˆé€šè¿‡å‰ä¸¤æ­¥çš„æ€è€ƒï¼Œåˆ—å‡ºå¯èƒ½çš„æƒ…å†µï¼Œåˆ†ç±»è®¨è®ºï¼Œè¿™æ˜¯äºŒåˆ†çš„å…³é”®æ‰€åœ¨ï¼Œç¼©å°æŸ¥æ‰¾åŒºé—´ï¼‰

è¿™æ­¥ï¼Œä¸€å®šè¦ç»“åˆä¸Šé¢ã€æƒ…å†µä¸€ã€‘å’Œã€æƒ…å†µäºŒã€‘çš„ä¾‹å­æ¥ä»”ç»†æ€è€ƒåˆ’åˆ†ï¼Œåˆ‡å‹¿ç²—å¿ƒã€‚ä¸€ä¸ªä¸å°å¿ƒï¼ŒäºŒåˆ†å°±æ­»å¾ªç¯äº†ï¼Œæˆ–è€…è¾¹ç•Œé”™è¯¯ğŸ˜ˆ

> è¿™é‡Œæœ‰å‘ï¼Œæˆ‘è¸©äº†

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200719200644.png)

ä¸€å…±å¯¹åº”è¿™6ç§æƒ…å†µï¼Œæœ¬æ¥ä¸º8ç§ï¼Œæ’é™¤ä¸¤ç§ï¼Œä¸‹é¢ä¸€ä¸€åˆ†æ

### n[mid]  >=  leftï¼Œé’ˆå¯¹midå·¦è¾¹ç•Œæœ‰åº

**å½“ã€tar  >=  n[left]ã€‘ï¼Œä¼šæœ‰ä¸¤ç§æƒ…å†µ**

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200719201354.png)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200719200818.png)

`tar >= n[mid]`æ—¶ï¼Œå³è¾¹ç•Œæœ‰æ•ˆçš„æ•°åªæœ‰`8`ï¼Œå› ä¸º1ã€2ã€3ä¸æ»¡è¶³å¤§äº4ï¼Œå³`tar >= left`ã€‚çœ‹ä¼¼åœ¨éå®Œå…¨æœ‰åºä¸­æŸ¥æ‰¾ï¼Œå…¶å®æ˜¯åœ¨æœ‰åºæ•°åˆ—ä¸­æŸ¥æ‰¾

**å½“ã€tar  <  n[left]ã€‘ï¼Œåªæœ‰ä¸€ç§æƒ…å†µ**

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200719210158.png)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200719201524.png)

**ä¸å¯èƒ½ä¼šå‡ºç°`tar >= n[mid]`ï¼Œå› ä¸ºä¸æ»¡è¶³å‡åºçš„æ—‹è½¬æ•°ç»„å®šä¹‰ï¼Œæ—‹è½¬ç‚¹åªæœ‰ä¸€ä¸ª**

`tar < n[left]`çš„æ¡ä»¶ä¹‹ä¸‹ï¼Œè€Œ`n[mid] > n[left]`ï¼Œæ•…**ä¸å¯èƒ½**`tar >= n[left]`

--------------------

ç»¼ä¸Šï¼Œè¿™ä¸‰ç§æƒ…å†µå¯åˆä¸ºä¸¤ç§æƒ…å†µåˆ¤å®šï¼š

```java
//å…ˆæ ¹æ® nums[mid] ä¸ nums[left] çš„å…³ç³»åˆ¤æ–­ mid æ˜¯åœ¨å·¦æ®µè¿˜æ˜¯å³æ®µ 
if(nums[mid] >= nums[left]) {
	//å†åˆ¤æ–­targetæ˜¯åœ¨ midçš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ï¼Œä»è€Œè°ƒæ•´å·¦å³è¾¹ç•Œ
    if(target >= nums[left] && target < nums[mid]) {
    	right = mid - 1;
    } else {
        //å…¶å®æ˜¯ä¸¤ç§å¯èƒ½çš„æƒ…å†µ
        left = mid + 1; 
    }
}
```

-----------------------

### n[mid]  <  leftï¼Œé’ˆå¯¹midå³è¾¹ç•Œæœ‰åº

**å½“ã€tar  <=  n[right]ã€‘ï¼Œæœ‰ä¸¤ç§æƒ…å†µ**

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200719203237.png)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200719203259.png)

**å½“ã€tar  >  n[right]ã€‘ï¼Œåªæœ‰ä¸€ç§æƒ…å†µ**

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200719203854.png)

**ä¸å¯èƒ½ä¼šå‡ºç°`tar <= n[mid]`ï¼Œå› ä¸ºä¸æ»¡è¶³å‡åºçš„æ—‹è½¬æ•°ç»„å®šä¹‰ï¼Œæ—‹è½¬ç‚¹åªæœ‰ä¸€ä¸ª**

----------------

ç»¼ä¸Šæ‰€è¿°ï¼Œä¸‰ç§æƒ…å†µåˆä¸ºä¸¤ç§æƒ…å†µåˆ¤å®šï¼š

```java
else {
	if(target <= nums[right] && target > nums[mid]) {
		left = mid + 1;
	} else {
        //å…¶å®æ˜¯ä¸¤ç§å¯èƒ½çš„æƒ…å†µ
		right = mid - 1;
	}
}
```

## 3. ä»£ç å®ç°

```java
class Solution {
    public int search(int[] nums, int target) {
        if(nums.length == 0 || nums == null)  return -1;
        int left = 0, right = nums.length - 1;
        while(left <= right) {
            int mid = left + ((right - left) >> 1);

            if(nums[mid] == target) 
                return mid;
            
            //å…ˆæ ¹æ® nums[mid] ä¸ nums[left] çš„å…³ç³»åˆ¤æ–­ mid æ˜¯åœ¨å·¦æ®µè¿˜æ˜¯å³æ®µ 
            if(nums[mid] >= nums[left]) {
                //å†åˆ¤æ–­targetæ˜¯åœ¨ midçš„å·¦è¾¹è¿˜æ˜¯å³è¾¹ï¼Œä»è€Œè°ƒæ•´å·¦å³è¾¹ç•Œ
                if(target >= nums[left] && target < nums[mid]) {
                    right = mid - 1;
                } else {
                    //å…¶å®æ˜¯ä¸¤ç§å¯èƒ½çš„æƒ…å†µ
                    left = mid + 1;
                }
            } else {
                if(target <= nums[right] && target > nums[mid]) {
                    left = mid + 1;
                } else {
                    //å…¶å®æ˜¯ä¸¤ç§å¯èƒ½çš„æƒ…å†µ
                    right = mid - 1;
                }
            }
        }
        return -1;
    }
}
```




## é¢˜ç›®æè¿°

ğŸ“š[120. ä¸‰è§’å½¢æœ€å°è·¯å¾„å’Œ](https://leetcode-cn.com/problems/triangle/)

ç»™å®šä¸€ä¸ªä¸‰è§’å½¢ï¼Œæ‰¾å‡ºè‡ªé¡¶å‘ä¸‹çš„æœ€å°è·¯å¾„å’Œã€‚æ¯ä¸€æ­¥åªèƒ½ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œä¸­ç›¸é‚»çš„ç»“ç‚¹ä¸Šã€‚

**ç›¸é‚»çš„ç»“ç‚¹ åœ¨è¿™é‡ŒæŒ‡çš„æ˜¯ ä¸‹æ ‡ ä¸ ä¸Šä¸€å±‚ç»“ç‚¹ä¸‹æ ‡ ç›¸åŒæˆ–è€…ç­‰äº ä¸Šä¸€å±‚ç»“ç‚¹ä¸‹æ ‡ + 1 çš„ä¸¤ä¸ªç»“ç‚¹ã€‚**

ä¾‹å¦‚ï¼Œç»™å®šä¸‰è§’å½¢ï¼š

```javadoc
[
 [2],
 [3,4],
 [6,5,7],
 [4,1,8,3]
]
```



> è‡ªé¡¶å‘ä¸‹çš„æœ€å°è·¯å¾„å’Œä¸ºÂ 11ï¼ˆå³ï¼Œ2Â +Â 3Â +Â 5Â +Â 1Â = 11ï¼‰ã€‚

------------------

## è§£é¢˜è¯¯åŒº

å…¸å‹çš„åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œæ²¡æœ‰æ³¨æ„åˆ°é¢˜ç›®**ç›¸é‚»èŠ‚ç‚¹çš„**ä¿¡æ¯ã€‚ğŸ¤”æ™ºéšœçš„æˆ‘ç”¨é›†åˆéå†æ•´äº†åŠå¤©ï¼Œç»“æœæ­»åœ¨äº†è¿™ä¸ªç”¨ä¾‹ï¼š

- è¾“å…¥ï¼š`[[-1],[2,3],[1,-1,-3]]`

- è¾“å‡ºï¼š-2

- é¢„æœŸï¼š-1

**é¢˜ç›®çš„æ„æ€å¹¶ä¸æ˜¯ç›´æ¥æ±‚æœ€å°è·¯å¾„ï¼Œéšå«çš„æ—¶æ±‚åœ¨ç›¸é‚»èŠ‚ç‚¹çš„æ¡ä»¶ä¸‹ï¼Œæ±‚æœ€å°è·¯å¾„**

```javadoc
 ```javadoc
[
 [2],
 [3,4],
 [6,5,7],
 [4,1,8,3]
]
```
```

ç›¸é‚»ç»“ç‚¹ï¼šä¸`(i, j) `ç‚¹ç›¸é‚»çš„ç»“ç‚¹ä¸º` (i + 1, j)Â `å’Œ `(i + 1, j + 1)`


æ¨å€’é€’æ¨å…¬å¼ä¸ºï¼š

```java
f(i, j) = min(f(i + 1, j), f(i + 1, j + 1)) + triangle[i][j]
```

## æ€è·¯ä¸€ï¼šé€’å½’ï¼ˆè¶…æ—¶ï¼‰

ã€é€’å½’å‡ºå£ã€‘

- å½“triangleä¸­åªæœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œ`triangle.size() == i`ï¼Œå‰©ä¸‹çš„ä¸€ä¸ªå…ƒç´ å°±æ˜¯æœ€å°è·¯å¾„

- é€’å½’å‡½æ•°ä¸ºé€’æ¨å…¬å¼

```java
class Solution {
    public int minimumTotal(List<List<Integer>> triangle) {
        return dfs(triangle, 0, 0);
    }
    
    private int dfs(List<List<Integer>> triangle, int i, int j) {
        if(triangle.size() == i)  
            return 0;
        
        return Math.min(dfs(triangle, i+1, j), dfs(triangle, i+1, j+1)) + triangle.get(i).get(j);
    }
}
```

## æ€è·¯äºŒï¼šé€’å½’ + è®°å¿†åŒ–

æ—¢ç„¶é€’å½’ è¶…æ—¶äº†ï¼Œé‚£å°±åŠ ä¸ªè®°å¿†æ•°ç»„ï¼Œé˜²æ­¢é‡å¤è®¡ç®—ã€‚

è®¡ç®—ä¹‹å‰å…ˆåˆ°å¤‡å¿˜å½•ä¸­æ‰¾è¯¥å€¼æ˜¯å¦è¢«è®¡ç®—è¿‡

- `memo[i][j] == 0`ï¼Œè¯´æ˜æœªè®¡ç®—è¿‡ï¼Œé‡æ–°è®¡ç®—å³å¯

- `memo[i][j] != 0`ï¼Œä¹‹å‰å·²è®¡ç®—ï¼Œç›´æ¥å–å€¼ä¸å†è®¡ç®—

```java
class Solution {
    int[][] memo;

    public int minimumTotal(List<List<Integer>> triangle) {
        memo = new int[triangle.size()][triangle.size()];
        return dfs(triangle, 0, 0);
    }
    
    private int dfs(List<List<Integer>> triangle, int i, int j) {
        if(triangle.size() == i)  
            return 0;
        //è®°å¿†åŒ–
        if(memo[i][j] != 0) 
            return memo[i][j];
        
        return memo[i][j] = Math.min(dfs(triangle, i+1, j), dfs(triangle, i+1, j+1)) + triangle.get(i).get(j);
    }
}
```

## æ€è·¯ä¸‰ï¼šè‡ªä¸‹è€Œä¸ŠDP

ä»¥è‡ªä¸‹è€Œä¸Šçš„è§’åº¦çœ‹ï¼Œä¸‰è§’å½¢ä¸­ä»»æ„ä¸€ä¸ªä½ç½®`triangle[i][j]`ï¼Œåªæœ‰ä¸¤ä¸ªå€¼èƒ½ç§»åŠ¨åˆ°è¿™ä¸ªè¿™é‡Œ
åˆ†åˆ«æ˜¯`triangle[i+1][j+1]`ï¼Œä»¥åŠ`triangle[i+1][j]`

**è‡ªä¸‹è€Œä¸Šçš„æ€ç»´ï¼š** å½“å‰`triangle[i][j]`<u>æ˜¯ç”±å…¶ä¸‹é¢çš„ç›¸é‚»èŠ‚ç‚¹è®¡ç®—è€Œæ¥</u>ï¼Œå³æ­£ä¸‹å’Œå³ä¸‹å…ƒç´ é€‰æœ€å°

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/imgs01/20200810095256.jpg)

å¯¹äº`triangle[2][1]`è¿™ä¸ªä½ç½®ï¼Œå®ƒæ˜¯ä»`triangle[3][2]`ï¼Œä»¥åŠ`triangle[3][1]`è¿™ä¸¤ä¸ªä½ç½®ç§»åŠ¨è€Œæ¥çš„ã€‚è€Œè¿™ä¸¤ä¸ªå€¼ä¿å­˜åœ¨`dp[3][2]`å’Œ`dp[3][1]`ä¸­ã€‚
æˆ‘ä»¬ä»`dp[3][2]`å’Œ`dp[3][1]`ä¸­é€‰æ‹©ä¸€ä¸ªè¾ƒå°çš„å€¼ï¼Œè¿™é‡Œæ˜¯1ï¼Œç„¶åå†åŠ ä¸Š`triangle[2][1]`çš„å€¼5ï¼Œå°†ç»“æœ6ä¿å­˜åˆ°`dp[2][1]`ä¸­ã€‚
å…¶dpè½¬ç§»å…¬å¼ä¸ºï¼š

```java
dp[i][j] = min(dp[i+1][j+1],dp[i+1][j]) + triangle[i][j]
```

### dpæ•°ç»„åˆå§‹åŒ–çš„é—®é¢˜

**ğŸ¤”ä¸ºä»€ä¹ˆè¦å¼€è¾Ÿ \[N+1][M+1]çš„ç©ºé—´è€Œä¸æ˜¯\[N][M]**

> æ˜æ˜ acountåªæœ‰`1 ~ 11`ç§çŠ¶æ€ï¼Œcoinåªæœ‰`3`ä¸­é¢å€¼ï¼Œå´å¼€è¾Ÿäº†`12 * 4`çš„æ•°ç»„ç©ºé—´å‘¢ï¼Ÿ

ä¹‹æ‰€ä»¥ä»¥è¦å¤šåŠ ä¸€è¡Œï¼Œæ˜¯å› ä¸º**çŠ¶æ€è½¬ç§»å…¬å¼å˜åŒ–**æ‰€å¯¼è‡´çš„ï¼Œä¸ºäº†å¤„ç†ä¸€äº›**è¾¹ç•Œæ¡ä»¶**ï¼Œæ‰€ä»¥å¢åŠ äº†ä¸€è¡Œ

DPçš„ä»£ç ï¼Œæœ€å®¹æ˜“å‡ºç°çš„bugä¾¿æ˜¯`ArrayIndexOutOfBoundsException`ï¼ŒåŸºæœ¬éƒ½æ˜¯è¾¹ç•Œé—®é¢˜æ²¡æ§åˆ¶å¥½

ã€å¦‚ä¸‹è‡ªåº•å‘ä¸Šåˆ†æã€‘ï¼š

çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸º

```java
f(i, j) = min(f(i + 1, j), f(i + 1, j + 1))
```

![](https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pcXFjb2RlLWJsb2cub3NzLWNuLWJlaWppbmcuYWxpeXVuY3MuY29tL2ltZ3MwMS8yMDIwMDgxMDAwMjA1OC5wbmc?x-oss-process=image/format,png)

åŸ`4 * 4`çš„äºŒç»´æ•°ç»„ï¼Œæˆ‘ä»¬è®¡ç®—`dp[3][3]`æ—¶ï¼Œæˆ‘ä»¬è¦åœ¨`3`çš„æ­£ä¸‹æ–¹å’Œå³ä¸‹æ–¹é€‰æ‹©ä¸€ä¸ªè¾ƒå°å€¼ã€‚

- å¦‚æœå¤§å°å®šä¹‰ä¸º`4 * 4`æ—¶ï¼Œåˆå§‹è®¡ç®—`3`æ—¶å°±å¾ˆéš¾è®¡ç®—ï¼Œè¿™ä¸€è¡Œéƒ½ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œå¾ˆå®¹æ˜“äº§ç”Ÿè¶Šç•Œ

- ä½†æ˜¯å¤§å°å®šä¹‰ä¸º`5 * 5`æ—¶ï¼Œæˆ‘ä»¬åªè¦åˆå§‹åŒ–äº†`dp[4][]`è¿™ä¸€è¡Œï¼Œå°±å¯ä»¥ç›´æ¥è®¡ç®—

**æ‰€ä»¥ï¼Œå®šä¹‰ä¸º[N+1][M+1]åªæ˜¯ä¸ºäº†æ›´åŠ æ–¹ä¾¿çš„å»å¤„ç†è¾¹ç•Œæ¡ä»¶ã€‚æ³¨æ„è®°å¾—æ ¹æ®å®é™…æƒ…å†µå»åˆå§‹åŒ–**

```java
class Solution {
    public int minimumTotal(List<List<Integer>> triangle) {
        int n = triangle.size();
        int[][] dp = new int[n+1][n+1];
        //å€’æ•°ç¬¬äºŒè¡Œï¼Œå€’æ•°ç¬¬äºŒåˆ—
        for(int i = n - 1; i >= 0; i--) {
            for(int j = triangle.get(i).size() - 1; j >= 0; j--) {
                dp[i][j] = Math.min(dp[i+1][j], dp[i+1][j+1]) + triangle.get(i).get(j);
            }
        }
        return dp[0][0];
    }
}
```

### ç©ºé—´å‹ç¼©

äºŒç»´æ•°ç»„è®¡ç®—`dp[i][j]`æ—¶åªç”¨åˆ°äº†`dp[i+1][j+1]`å’Œ`dp[i+1][j]`
ä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸€ä¸ªæ»šåŠ¨æ›´æ–°çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬åªç”¨åˆ°äº†ä¸Šä¸‹ä¸¤è¡Œæ•°æ®
**æ±‚`dp[i][j]`æ—¶åªéœ€è¦`dp[i+1]`è¿™ä¸€è¡Œçš„æ•°æ®å³å¯**ï¼Œ`dp[i+2]`ï¼Œ`dp[i+3]`...è¿™äº›éƒ½ä¸éœ€è¦äº†ã€‚
äºæ˜¯æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œå…¶é•¿åº¦ä¸ºä¸‰è§’å½¢åˆ—æ•°+1

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/imgs01/20200810102947.jpg)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/imgs01/20200810102802.png)

**çŠ¶æ€æ–¹ç¨‹**

```java
dp[j] = min(dp[j],dp[j+1]) + triangle[i][j]
```

æˆ‘ä»¬ç”¨çš„æ˜¯è‡ªä¸‹è€Œä¸Šçš„è®¡ç®—æ–¹å¼ï¼Œå…ˆè®¡ç®—n-1è¡Œï¼Œå†è®¡ç®—n-2è¡Œï¼Œä¸€ç›´åˆ°ç¬¬1è¡Œ  
æ¯è¡Œè®¡ç®—çš„æ—¶å€™ç”¨çš„æ˜¯ä»å·¦åˆ°å³çš„æ–¹å¼ï¼Œå¦‚æœæ˜¯ä»å³åˆ°å·¦è®¡ç®—ä¼šå‡ºç°å€¼è¦†ç›–

```java
class Solution {
    public int minimumTotal(List<List<Integer>> triangle) {
        int n = triangle.size();
        int[] dp = new int[n+1];
        //å€’æ•°ç¬¬äºŒè¡Œï¼Œå€’æ•°ç¬¬äºŒåˆ—
        for(int k = n - 1; k >= 0; k--) {
            for(int i = 0; i < triangle.get(k).size(); i++) {
                dp[i] = Math.min(dp[i], dp[i+1]) + triangle.get(k).get(i);
            }
        }
        return dp[0];
    }
}
```

## æ€è·¯å››ï¼šè‡ªä¸Šè€Œä¸‹

è¿™æ˜¯é€’å½’çš„æ€æƒ³ã€‚ä¸Šé¢æ ˆåº•çš„å…ƒç´ çš„è®¡ç®—å€¼ï¼Œéœ€è¦ä¾èµ–ä¸‹é¢æ ˆé¡¶çš„è®¡ç®—ç»“æœã€‚

**è‡ªä¸Šè€Œä¸‹çš„æ€ç»´ï¼š** å½“å‰`triangle[i][j]`<u>æ˜¯ç”±å…¶ä¸Šé¢çš„ç›¸é‚»èŠ‚ç‚¹è®¡ç®—è€Œæ¥</u>ï¼Œå³æ­£ä¸Šå’Œå·¦ä¸Šå…ƒç´ é€‰æœ€å°

å¯¹äºä¸‰è§’å½¢ä¸­ä»»æ„ä¸€ä¸ªä½ç½®`triangle[i][j]`ï¼Œåªæœ‰ä¸¤ä¸ªå€¼èƒ½ç§»åŠ¨åˆ°è¿™ä¸ªä½ç½®
åˆ†åˆ«æ˜¯`triangle[i-1][j-1]`ï¼Œä»¥åŠ`triangle[i-1][j]`ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/imgs01/20200810100015.jpg)

å¯¹äº`triangle[2][1]`è¿™ä¸ªä½ç½®ï¼Œå®ƒæ˜¯ä»`triangle[1][0]`ï¼Œä»¥åŠtriangle[1][1]è¿™ä¸¤ä¸ªä½ç½®ç§»åŠ¨è€Œæ¥çš„ã€‚è€Œè¿™ä¸¤ä¸ªå€¼æˆ‘ä»¬å·²ç»å…ˆä¿å­˜åˆ°`dp[1][0]`å’Œ`dp[1][1]`ä¸­äº†ã€‚
æˆ‘ä»¬ä»`dp[2][1]`å’Œ`dp[1][0]`ä¸­é€‰æ‹©ä¸€ä¸ªè¾ƒå°çš„å€¼ï¼Œè¿™é‡Œå°±æ˜¯5ï¼Œç„¶åå†åŠ ä¸Š`triangle[2][1]`çš„å€¼5ï¼Œå°†ç»“æœ10ä¿å­˜åˆ°`dp[2][1]`ä¸­ã€‚
dpè½¬ç§»å…¬å¼ä¸ºï¼š

```java
dp[i][j] = min(dp[i-1][j-1],dp[i-1][j]) + triangle[i][j] 
```

è¿˜æœ‰ä¸¤ä¸ªè¾¹ç•Œæ¡ä»¶è¦æ³¨æ„ï¼Œä½†æ˜¯è‡ªä¸‹è€Œä¸Šåˆ™ä¸ç”¨è€ƒè™‘

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/imgs01/20200810100246.jpg)

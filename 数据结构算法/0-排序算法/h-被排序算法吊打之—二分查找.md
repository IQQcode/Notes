![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200520084507.png)

## 1. äºŒåˆ†æŸ¥æ‰¾æ€æƒ³

çŒœæ•°å­—çš„æ¸¸æˆå¤§å®¶éƒ½ç©è¿‡å§ï¼Ÿæˆ‘è¯´ä¸€ä¸ª0~100ä¹‹é—´çš„æ•°å­—ï¼Œä½ æ¥çŒœã€‚çŒœå¯¹äº†ï¼Œä¹Ÿæ²¡æœ‰å¥–åŠ±ã€‚

é‚£ä½ ä¼šæ€ä¹ˆçŒœï¼Ÿä»0~100é€ä¸ªçŒœï¼Ÿæ˜¾ç„¶è¿™æ ·æ˜¯ä¸è¡Œçš„ã€‚æˆ‘ä»¬éƒ½ä¼šå…ˆè¯´50ï¼Œå¤§äº†å†çŒœ25ï¼Œå°äº†å†çŒœ75ï¼Œç„¶åå†æŠ˜åŠçš„ç¼©å°åŒºé—´ï¼Œæœ€ç»ˆçŒœå‡ºæ•°å­—ã€‚

ä¸Šé¢çš„è¿™ç§æ€æƒ³ï¼Œå°±æ˜¯äºŒåˆ†æŸ¥æ‰¾çš„æ€æƒ³ã€‚æˆ‘ä»¬å½’çº³å‡ºä»–çš„è¦ç‚¹ï¼š

- å¾…æŸ¥æ‰¾çš„æ•°æ˜¯æœ‰åºçš„

- æ¯æ¬¡æŠ˜åŠæ¥ç¼©å°åŒºé—´æŸ¥æ‰¾

æ¯”å¦‚æˆ‘ä»¬åœ¨å·²çŸ¥çš„æœ‰åºåºåˆ—ä¸­æŸ¥æ‰¾æ•°å­—`7`ï¼Œé‚£ä¹ˆç»è¿‡ä»¥ä¸‹æŠ˜åŠï¼Œåˆ™ä¸‰æ¬¡å³å¯æŸ¥æ‰¾å®Œæˆã€‚

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200520092641.png)

äºŒåˆ†æŸ¥æ‰¾å¹¶ä¸ç®€å•ï¼ŒKnuth å¤§ä½¬ï¼ˆå‘æ˜ KMP ç®—æ³•çš„é‚£ä½ï¼‰éƒ½è¯´äºŒåˆ†æŸ¥æ‰¾ï¼š**æ€è·¯å¾ˆç®€å•ï¼Œç»†èŠ‚æ˜¯é­”é¬¼**ã€‚å¾ˆå¤šäººå–œæ¬¢æ‹¿æ•´å‹æº¢å‡ºçš„ bug è¯´äº‹å„¿ï¼Œä½†æ˜¯äºŒåˆ†æŸ¥æ‰¾çœŸæ­£çš„å‘æ ¹æœ¬ä¸æ˜¯é‚£ä¸ªç»†èŠ‚é—®é¢˜ï¼Œè€Œæ˜¯åœ¨äºåˆ°åº•è¦ç»™ `mid` åŠ ä¸€è¿˜æ˜¯å‡ä¸€ï¼Œwhile é‡Œåˆ°åº•ç”¨ `<=` è¿˜æ˜¯ `<`

ä½ è¦æ˜¯æ²¡æœ‰æ­£ç¡®ç†è§£è¿™äº›ç»†èŠ‚ï¼Œå†™äºŒåˆ†è‚¯å®šå°±æ˜¯ç„å­¦ç¼–ç¨‹ï¼ŒåŸºæœ¬å°±æ˜¯ä¸€çœ‹å°±ä¼šï¼Œä¸€å†™å°±åºŸï¼›æ„Ÿè§‰è‰¯å¥½ï¼Œbugéš¾æ‰¾ï¼æœ‰æ²¡æœ‰ bug åªèƒ½é è©è¨ä¿ä½‘ã€‚

### äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ç®€ä»‹

> å›¾ç‰‡å†…å®¹æ¥è‡ª[liweiwei1419](https://leetcode-cn.com/u/liweiwei1419)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722081932.png)

----------------------------

## 2. äºŒåˆ†æŸ¥æ‰¾è¯¦è§£

> ğŸ”ˆ~~ **ã€å£°æ˜ã€‘**ï¼šè¿™é‡Œå¹¶éåªæœ‰å‡æ²»æ‰èƒ½ç”¨`<`ï¼Œå¸¸è§„çš„å†™æ³•ä¹Ÿå¯ä»¥ç”¨`<`ã€‚è¿™ä¸¤ç§è¾¹ç•Œä¸¤ç§ä¸åŒçš„å†™æ³•å‡å¯ä½¿ç”¨ï¼Œåªæ˜¯è¾¹ç•Œæ¡ä»¶ä¸åŒè€Œå·²

è¿™ä¸ªåœºæ™¯æ˜¯æœ€ç®€å•çš„ï¼Œè‚¯èƒ½ä¹Ÿæ˜¯å¤§å®¶æœ€ç†Ÿæ‚‰çš„ï¼Œå³æœç´¢ä¸€ä¸ªæ•°ï¼Œå¦‚æœå­˜åœ¨ï¼Œè¿”å›å…¶ç´¢å¼•ï¼Œå¦åˆ™è¿”å› -1ã€‚

```java
public int binarySearch(int[] nums, int target) {
    int left = 0; 
    int right = nums.length - 1; // æ³¨æ„

    while(left <= right) {  //æ³¨æ„
        int mid = (left + right) >>> 1;
        if(nums[mid] == target)
            return mid; 
        else if (nums[mid] < target)
            left = mid + 1; // æ³¨æ„
        else if (nums[mid] > target)
            right = mid - 1; // æ³¨æ„
    }
    return -1;
}
```

JDK8æºç çš„äºŒåˆ†æŸ¥æ‰¾ï¼š

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722091003.png)

### whileå¾ªç¯çš„æ¡ä»¶

**1ã€ä¸ºä»€ä¹ˆ while å¾ªç¯çš„æ¡ä»¶ä¸­æ˜¯ <=ï¼Œè€Œä¸æ˜¯ <**

ç­”ï¼šå› ä¸ºåˆå§‹åŒ– `right` çš„èµ‹å€¼æ˜¯ `nums.length - 1`ï¼Œå³æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•ï¼Œè€Œä¸æ˜¯ `nums.length`ã€‚

è¿™äºŒè€…å¯èƒ½å‡ºç°åœ¨ä¸åŒåŠŸèƒ½çš„äºŒåˆ†æŸ¥æ‰¾ä¸­ï¼ŒåŒºåˆ«æ˜¯ï¼šå‰è€…ç›¸å½“äºä¸¤ç«¯éƒ½é—­åŒºé—´ `[left, right]`ï¼Œåè€…ç›¸å½“äºå·¦é—­å³å¼€åŒºé—´ `[left, right)`ï¼Œå› ä¸ºç´¢å¼•å¤§å°ä¸º `nums.length` æ˜¯è¶Šç•Œçš„ã€‚

æ–‡ä¸­æ‰€æœ‰çš„ç®—æ³•éƒ½æ˜¯åŸºäºå‰è€… `[left, right]` ä¸¤ç«¯éƒ½é—­çš„åŒºé—´ã€‚**è¿™ä¸ªåŒºé—´å…¶å®å°±æ˜¯æ¯æ¬¡è¿›è¡Œæœç´¢çš„åŒºé—´**ã€‚

**2ã€ <=ï¼Œå’Œ < ç»“æŸçš„ä¸´ç•Œå€¼æ˜¯ä»€ä¹ˆ**

- **`<=`ï¼šright == left - 1**

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722085830.png)

**`<=`ï¼šright == left**

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722090616.png)

-----------------------

### åœæ­¢æœç´¢çš„ä¸´ç•Œæ¡ä»¶

ä»€ä¹ˆæ—¶å€™åº”è¯¥åœæ­¢æœç´¢å‘¢ï¼Ÿå½“ç„¶ï¼Œæ‰¾åˆ°äº†ç›®æ ‡å€¼çš„æ—¶å€™å¯ä»¥ç»ˆæ­¢ï¼š

```java
    if(nums[mid] == target)
        return mid;
```

ä½†å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±éœ€è¦ while å¾ªç¯ç»ˆæ­¢ï¼Œç„¶åè¿”å› -1ã€‚é‚£ while å¾ªç¯ä»€ä¹ˆæ—¶å€™åº”è¯¥ç»ˆæ­¢ï¼Ÿ**æœç´¢åŒºé—´ä¸ºç©ºçš„æ—¶å€™åº”è¯¥ç»ˆæ­¢**ï¼Œæ„å‘³ç€ä½ æ²¡å¾—æ‰¾äº†ï¼Œå°±ç­‰äºæ²¡æ‰¾åˆ°å˜›ã€‚

`while(left <= right)` çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ `left == right + 1`ï¼Œå†™æˆåŒºé—´çš„å½¢å¼å°±æ˜¯ `[right + 1, right]`ï¼Œæˆ–è€…å¸¦ä¸ªå…·ä½“çš„æ•°å­—è¿›å» `[3, 2]`ï¼Œå¯è§**è¿™æ—¶å€™åŒºé—´ä¸ºç©º**ï¼Œå› ä¸ºæ²¡æœ‰æ•°å­—æ—¢å¤§äºç­‰äº 3 åˆå°äºç­‰äº 2 çš„å§ï¼Œè¿™ä¸ªé›†åˆä¸ºç©ºé›†ã€‚æ‰€ä»¥è¿™æ—¶å€™ while å¾ªç¯ç»ˆæ­¢æ˜¯æ­£ç¡®çš„ï¼Œç›´æ¥è¿”å› -1 å³å¯ã€‚

`while(left < right)` çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ `left == right`ï¼Œå†™æˆåŒºé—´çš„å½¢å¼å°±æ˜¯ `[left, right]`ï¼Œæˆ–è€…å¸¦ä¸ªå…·ä½“çš„æ•°å­—è¿›å» `[2, 2]`ï¼Œ**è¿™æ—¶å€™åŒºé—´éç©º**ï¼Œ<font color = red>è¿˜æœ‰ä¸€ä¸ªæ•° 2</font>ï¼Œä½†æ­¤æ—¶ while å¾ªç¯ç»ˆæ­¢äº†ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™åŒºé—´ `[2, 2]` è¢«æ¼æ‰äº†ï¼Œç´¢å¼• 2 æ²¡æœ‰è¢«æœç´¢ï¼Œå¦‚æœè¿™æ—¶å€™ç›´æ¥è¿”å› -1 å°±æ˜¯é”™è¯¯çš„ã€‚

å½“ç„¶ï¼Œå¦‚æœä½ éè¦ç”¨ `while(left < right)` ä¹Ÿå¯ä»¥ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†å‡ºé”™çš„åŸå› ï¼Œå°±æ‰“ä¸ªè¡¥ä¸å¥½äº†ï¼š

```java
    //...
    while(left < right) {
        // ...
    }
    return nums[left] == target ? left : -1;
```

------------------------------------------------

### ä¸­é—´å€¼mid

å…³äºå–ä¸­é—´æ•° `int mid = (left + right) / 2`; `åœ¨ left + right` å¾ˆå¤§çš„æ—¶å€™ä¼šå‘ç”Ÿæ•´å½¢æº¢å‡ºï¼Œä¸€èˆ¬è¿™æ ·æ”¹å†™ï¼š

```java
int mid = left + (right - left) / 2;
```

è¿™ä¸¤ç§å†™æ³•äº‹å®ä¸Šæ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«ï¼Œåœ¨ left å’Œ right éƒ½è¡¨ç¤ºæ•°ç»„ä¸‹æ ‡çš„æ—¶å€™ï¼Œå‡ ä¹ä¸ä¼šè¶Šç•Œï¼Œå› ä¸ºç»å¤§å¤šæ•°æƒ…å†µä¸‹ä¸ä¼šå¼€é‚£ä¹ˆé•¿çš„æ•°ç»„ã€‚

åœ¨ Java ä¸­è¿˜å¯ä»¥è¿™æ ·å†™

```java
int mid = (left + right) >>> 1;
```

> è¡¨ç¤ºæ— ç¬¦å·å³ç§»ï¼Œå®ƒè¡¨ç¤ºåœ¨ left + right å‘ç”Ÿæ•´å‹æº¢å‡ºçš„æ—¶å€™ï¼Œé«˜ä½è¡¥ 0ï¼Œç»“æœä¾ç„¶æ­£ç¡®ã€‚è¿™ä¸€ç‚¹æ˜¯ä» JDK çš„æºç ä¸­ Arrays.binarySearch() æ–¹æ³•å€Ÿé‰´æ¥çš„ã€‚

åœ¨ Python ä¸­ä¸ç”¨è¿™æ ·æ”¹å†™ï¼ŒPython åœ¨ `left + right` å‘ç”Ÿæ•´å‹æº¢å‡ºçš„æ—¶å€™ä¼šè‡ªåŠ¨è½¬æˆé•¿æ•´å½¢ã€‚

**è¿™é‡Œä¸å»ºè®®æŠŠ `/ 2` æ”¹å†™æˆ `>> 1`ï¼Œç†ç”±æ˜¯é«˜çº§è¯­è¨€åœ¨ç¼–è¯‘æœŸé—´ä¼šåšä¼˜åŒ–ï¼Œä¼šå°† `/ 2`ï¼Œä»¥åŠé™¤ä»¥2 çš„æ–¹å¹‚çš„æ“ä½œï¼Œåœ¨å†…éƒ¨ä¿®æ”¹ä¸º `>>`**ï¼Œåªéœ€è¦å†™ç¨‹åºæœ¬æ¥çš„é€»è¾‘å°±å¥½äº†ã€‚

å¦‚æœä½¿ç”¨ä½è¿ç®—ï¼Œåœ¨ C++ ä¸­å¯èƒ½è¿˜éœ€è¦æ³¨æ„è¿ç®—ä¼˜å…ˆçº§çš„é—®é¢˜ã€‚

**ä¸ºä»€ä¹ˆå–äºŒåˆ†ä¹‹ä¸€ï¼Ÿä¸‰åˆ†ä¹‹ä¸€ã€äº”åˆ†ä¹‹å››å¯ä¸å¯ä»¥ï¼Ÿ**

ç»“åˆäºŒåˆ†æŸ¥æ‰¾çš„æ€è·¯å¹¶ä¸éš¾ç†è§£ï¼Œå…¶å®åªè¦åœ¨æ•°ç»„ä¸­é—´ä»»æ„æ‰¾ä¸€ä¸ªä½ç½®çš„å…ƒç´ ï¼Œå¦‚æœæ°å¥½æ˜¯ç›®æ ‡å…ƒç´ ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚å¦‚æœä¸æ˜¯æ ¹æ®è¿™ä¸ªå…ƒç´ çš„å€¼å’Œç›®æ ‡å…ƒç´ çš„å¤§å°å…³ç³»ï¼Œè¿›è€Œåœ¨å½“å‰ä½ç½®çš„å·¦ä¾§è¿˜æ˜¯å³ä¾§ç»§ç»­æŸ¥æ‰¾ã€‚

è¿˜æœ‰ä¸€ä¸ªç»†èŠ‚ï¼Œ**`/ 2` è¡¨ç¤ºçš„æ˜¯ä¸‹å–æ•´**ï¼Œå½“æ•°ç»„ä¸­çš„å…ƒç´ ä¸ªæ•°ä¸ºå¶æ•°çš„æ—¶å€™ï¼Œ`int mid = left + (right - left) / 2`; åªèƒ½å–åˆ°ä½äºå·¦è¾¹çš„é‚£ä¸ªå…ƒç´ ã€‚

å–å³è¾¹ä¸­é—´æ•°çš„è¡¨è¾¾å¼æ˜¯ï¼ˆå…¶å®å°±æ˜¯åœ¨æ‹¬å·é‡Œ + 1ï¼Œè¡¨ç¤ºä¸Šå–æ•´ï¼‰ï¼š

`int mid = left + (right - left + 1) / 2;`

--------------------

### äºŒåˆ†çš„åŒºé—´åˆ’åˆ†

**ä¸ºä»€ä¹ˆ `left = mid + 1`ï¼Œ`right = mid - 1`ï¼Ÿæˆ‘çœ‹æœ‰çš„ä»£ç æ˜¯ `right = mid` æˆ–è€… `left = mid`ï¼Œæ²¡æœ‰è¿™äº›åŠ 1å‡1ï¼Œåˆ°åº•æ€ä¹ˆå›äº‹ï¼Œæ€ä¹ˆåˆ¤æ–­**ï¼Ÿ

ç­”ï¼šè¿™ä¹Ÿæ˜¯äºŒåˆ†æŸ¥æ‰¾çš„ä¸€ä¸ªéš¾ç‚¹ï¼Œä¸è¿‡åªè¦ä½ èƒ½ç†è§£å‰é¢çš„å†…å®¹ï¼Œå°±èƒ½å¤Ÿå¾ˆå®¹æ˜“åˆ¤æ–­ã€‚

åˆšæ‰æ˜ç¡®äº†ã€Œæœç´¢åŒºé—´ã€è¿™ä¸ªæ¦‚å¿µï¼Œè€Œä¸”æœ¬ç®—æ³•çš„æœç´¢åŒºé—´æ˜¯ä¸¤ç«¯éƒ½é—­çš„ï¼Œå³ `[left, right]`ã€‚é‚£ä¹ˆå½“æˆ‘ä»¬å‘ç°ç´¢å¼• `mid` ä¸æ˜¯è¦æ‰¾çš„ `target` æ—¶ï¼Œä¸‹ä¸€æ­¥åº”è¯¥å»æœç´¢å“ªé‡Œå‘¢ï¼Ÿ

å½“ç„¶æ˜¯å»æœç´¢ `[left, mid-1]` æˆ–è€… `[mid+1, right]` å¯¹ä¸å¯¹ï¼Ÿ**å› ä¸º** **`mid`** **å·²ç»æœç´¢è¿‡ï¼Œåº”è¯¥ä»æœç´¢åŒºé—´ä¸­å»é™¤**ã€‚

`left = mid + 1`ï¼Œ`right = mid - 1`æˆ‘ä»¬æ˜¯å°†åŒºé—´åˆ’åˆ†æˆäº†ä¸‰ä¸ªéƒ¨åˆ†

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722115242.png)

`left = mid `æˆ–è€…`right = mid`æˆ‘ä»¬åˆ’åˆ†äº†ä¸¤ä¸ªåŒºé—´

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722115743.png)

---------------------------------------------

### ç®—æ³•çš„ç¼ºé™·

**æ­¤ç®—æ³•æœ‰ä»€ä¹ˆç¼ºé™·**ï¼Ÿ

ç­”ï¼šè‡³æ­¤ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†è¯¥ç®—æ³•çš„æ‰€æœ‰ç»†èŠ‚ï¼Œä»¥åŠè¿™æ ·å¤„ç†çš„åŸå› ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªç®—æ³•å­˜åœ¨å±€é™æ€§ã€‚

æ¯”å¦‚è¯´ç»™ä½ æœ‰åºæ•°ç»„ `nums = [1,2,2,2,3]`ï¼Œ`target` ä¸º 2ï¼Œæ­¤ç®—æ³•è¿”å›çš„ç´¢å¼•æ˜¯ 2ï¼Œæ²¡é”™ã€‚ä½†æ˜¯å¦‚æœæˆ‘æƒ³å¾—åˆ° `target` çš„å·¦ä¾§è¾¹ç•Œï¼Œå³ç´¢å¼• 1ï¼Œæˆ–è€…æˆ‘æƒ³å¾—åˆ° `target` çš„å³ä¾§è¾¹ç•Œï¼Œå³ç´¢å¼• 3ï¼Œè¿™æ ·çš„è¯æ­¤ç®—æ³•æ˜¯æ— æ³•å¤„ç†çš„ã€‚

è¿™æ ·çš„éœ€æ±‚å¾ˆå¸¸è§ï¼Œ**ä½ ä¹Ÿè®¸ä¼šè¯´ï¼Œæ‰¾åˆ°ä¸€ä¸ª targetï¼Œç„¶åå‘å·¦æˆ–å‘å³çº¿æ€§æœç´¢ä¸è¡Œå—ï¼Ÿå¯ä»¥ï¼Œä½†æ˜¯ä¸å¥½ï¼Œå› ä¸ºè¿™æ ·éš¾ä»¥ä¿è¯äºŒåˆ†æŸ¥æ‰¾å¯¹æ•°çº§çš„å¤æ‚åº¦äº†**ã€‚

æˆ‘ä»¬åç»­çš„ç®—æ³•å°±æ¥è®¨è®ºè¿™ä¸¤ç§äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„æ‹“å±•ã€‚

---------------------------------------------

## 3. ä»£ç æ¨¡æ¿

### åŸºç¡€äºŒåˆ†æŸ¥æ‰¾

**åŸºç¡€äºŒåˆ†æ’åº [left <= right]**

- èŒƒå›´åœ¨`[left, right]`é—­åŒºé—´ä¸­ï¼Œ`left = 0`ã€`right = arr.length - 1`ï¼›

- æ³¨æ„å¾ªç¯æ¡ä»¶ä¸º `left <= right`

```java
public int binarySearch(int[] nums, int target) {

    int left = 0;
    int right = nums.length - 1;

    while (left <= right) {
        int mid = (left + right) >>> 1;
        if (target == nums[mid]) {
            return mid;
        } else if (target > nums[mid]) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }
    return -1;
}
```

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722075229.png)

è¿™ä¸ªæ€è·¯æŠŠå¾…æœç´¢åŒºé—´ `[left, right]` åˆ†ä¸º 3 ä¸ªéƒ¨åˆ†ï¼š

- `mid`Â ä½ç½®ï¼ˆåªæœ‰ 1 ä¸ªå…ƒç´ ï¼‰ï¼›
- `[left, mid - 1]`Â é‡Œçš„æ‰€æœ‰å…ƒç´ ï¼›
- `[mid + 1, right]`Â é‡Œçš„æ‰€æœ‰å…ƒç´ ï¼›

å¾ªç¯å¯ä»¥ç»§ç»­çš„æ¡ä»¶æ˜¯ `while (left <= right)`ï¼Œç‰¹åˆ«åœ°ï¼Œå½“ `left == right` å³å½“å¾…æœç´¢åŒºé—´é‡Œåªæœ‰ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼ŒæŸ¥æ‰¾ä¹Ÿå¿…é¡»è¿›è¡Œä¸‹å»ï¼›

------------------------

### å‡æ²»æ€æƒ³

**ã€ä¸­ä½æ•°å‘ä¸‹å–æ•´ã€‘**

```java
public int binarySearch(int[] nums, int target) {

    int left = 0;
    int right = nums.length - 1;

    while (left < right) {
        // é€‰æ‹©ä¸­ä½æ•°æ—¶ä¸‹å–æ•´
        int mid = (left + right) >>> 1;
        // check(mid)
        if(target > nums[mid]) {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [mid + 1, right]
            left  = mid + 1;
        } else {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [left, mid]
            right = mid;
        }
    }
    // é€€å‡ºå¾ªç¯çš„æ—¶å€™ï¼Œç¨‹åºåªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ æ²¡æœ‰çœ‹åˆ° (left = rightæŒ‡å‘çš„å…ƒç´ )
    // è§†æƒ…å†µï¼Œæ˜¯å¦éœ€è¦å•ç‹¬åˆ¤æ–­ leftï¼ˆæˆ–è€… rightï¼‰è¿™ä¸ªä¸‹æ ‡çš„å…ƒç´ æ˜¯å¦ç¬¦åˆé¢˜æ„
    return nums[left] == target ? left : -1;
}
```

**ã€ä¸­ä½æ•°å‘ä¸Šå–æ•´ã€‘**

```java
public int search(int[] nums, int target) {
    while (left < right) {
        // é€‰æ‹©ä¸­ä½æ•°æ—¶ä¸Šå–æ•´
        int mid = left + (right - left + 1) / 2;
        if (check(mid)) {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [left, mid - 1]
            right = mid - 1;
        } else {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [mid, right]
            left = mid;
        }
    }
    // é€€å‡ºå¾ªç¯çš„æ—¶å€™ï¼Œç¨‹åºåªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ æ²¡æœ‰çœ‹åˆ°ã€‚
    // è§†æƒ…å†µï¼Œæ˜¯å¦éœ€è¦å•ç‹¬åˆ¤æ–­ leftï¼ˆæˆ–è€… rightï¼‰è¿™ä¸ªä¸‹æ ‡çš„å…ƒç´ æ˜¯å¦ç¬¦åˆé¢˜æ„
}
```

**ä¸Šå–æ•´è¿˜æ˜¯ä¸‹å–æ•´ï¼Ÿ**

**åªæœ‰çœ‹åˆ°åˆ†æ”¯æ˜¯ left=mid ä¸ right=mid-1ï¼Œæ‰éœ€è¦å°†ä¸­é—´æ•°ä¸Šå–æ•´**

-----------------------------------------------

äºŒåˆ†æŸ¥æ‰¾ç®—æ³•æ˜¯å…¸å‹çš„ã€Œå‡æ²»æ€æƒ³ã€çš„åº”ç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾å°†å¾…æœç´¢çš„åŒºé—´é€æ¸ç¼©å°ï¼Œä»¥è¾¾åˆ°ã€Œç¼©å‡é—®é¢˜è§„æ¨¡ã€çš„ç›®çš„ï¼›

è¿™ä¸ªç‰ˆæœ¬çš„æ¨¡æ¿æ¨èä½¿ç”¨çš„åŸå› æ˜¯ï¼šéœ€è¦è€ƒè™‘çš„ç»†èŠ‚æœ€å°‘ï¼Œç¼–ç æ—¶ä¸å®¹æ˜“å‡ºé”™ã€‚äºŒåˆ†å¾—å¤„å¤„è€ƒè™‘å‘¨åˆ°ï¼Œä¸ç„¶å°±æ˜¯æ­»å¾ªç¯âŒï¼

> ğŸ‘‰[**å‡æ²»æ€æƒ³å†™äºŒåˆ†æŸ¥æ‰¾é—®é¢˜**](https://www.bilibili.com/video/BV147411i7zu)ï¼Œå›¾ç‰‡æ¥è‡ªweiweiå¤§ä½¬çš„è§†é¢‘è®²è§£

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722102654.png)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722102653.png)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722102657.png)

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722102656.png)![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722102655.png)

> å›¾ç‰‡åŠè§†é¢‘å†…å®¹æ¥è‡ª[liweiwei1419](https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/)ï¼Œ[å‡æ²»æ€æƒ³å†™äºŒåˆ†æŸ¥æ‰¾é—®é¢˜](https://www.bilibili.com/video/BV147411i7zu?p=1)

ç†è§£æ¨¡æ¿ä»£ç çš„è¦ç‚¹ï¼š

- æ ¸å¿ƒæ€æƒ³ï¼šè™½ç„¶æ¨¡æ¿æœ‰ä¸¤ä¸ªï¼Œä½†æ˜¯æ ¸å¿ƒæ€æƒ³åªæœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯ï¼šæŠŠå¾…æœç´¢çš„ç›®æ ‡å…ƒç´ æ”¾åœ¨æœ€ååˆ¤æ–­ï¼Œæ¯ä¸€æ¬¡å¾ªç¯æ’é™¤æ‰ä¸å­˜åœ¨ç›®æ ‡å…ƒç´ çš„åŒºé—´ï¼Œç›®çš„ä¾ç„¶æ˜¯ç¡®å®šä¸‹ä¸€è½®æœç´¢çš„åŒºé—´ï¼›
- ç‰¹å¾ï¼š`while (left < right)`ï¼Œè¿™é‡Œä½¿ç”¨ä¸¥æ ¼å°äºÂ `<`Â è¡¨ç¤ºçš„ä¸´ç•Œæ¡ä»¶æ˜¯ï¼šå½“åŒºé—´é‡Œçš„å…ƒç´ åªæœ‰ 2 ä¸ªæ—¶ï¼Œä¾ç„¶å¯ä»¥æ‰§è¡Œå¾ªç¯ä½“ã€‚æ¢å¥è¯è¯´ï¼Œé€€å‡ºå¾ªç¯çš„æ—¶å€™ä¸€å®šæœ‰Â `left == right`Â æˆç«‹ï¼Œ**è¿™ä¸€ç‚¹åœ¨å®šä½å…ƒç´ ä¸‹æ ‡çš„æ—¶å€™æå…¶æœ‰ç”¨**ï¼›
- åœ¨å¾ªç¯ä½“ä¸­ï¼Œå…ˆè€ƒè™‘Â `nums[mid]`Â åœ¨æ»¡è¶³ä»€ä¹ˆæ¡ä»¶ä¸‹ä¸æ˜¯ç›®æ ‡å…ƒç´ ï¼Œè¿›è€Œè€ƒè™‘ä¸¤ä¸ªåŒºé—´Â `[left, mid - 1]`Â ä»¥åŠÂ `[mid + 1, right]`Â é‡Œå…ƒç´ çš„æ€§è´¨ï¼Œç›®çš„ä¾ç„¶æ˜¯ç¡®å®šä¸‹ä¸€è½®æœç´¢çš„åŒºé—´ï¼›
- <font color = red>**æ³¨æ„ 1**</font>ï¼šå…ˆè€ƒè™‘ä»€ä¹ˆæ—¶å€™ä¸æ˜¯è§£ï¼Œæ˜¯ä¸€ä¸ªç»éªŒï¼Œåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ä¸æ˜“å‡ºé”™ï¼Œé‡ç‚¹è¿˜æ˜¯ç¡®å®šä¸‹ä¸€è½®æœç´¢çš„åŒºé—´ï¼Œç”±äºè¿™ä¸€æ­¥ä¸å®¹æ˜“å‡ºé”™ï¼Œå®ƒçš„åé¢ï¼ˆä¹Ÿå°±æ˜¯Â `else`Â è¯­å¥çš„éƒ¨åˆ†ï¼‰ï¼Œå°±ä¸ç”¨å»è€ƒè™‘å¯¹åº”çš„åŒºé—´æ˜¯ä»€ä¹ˆï¼Œç›´æ¥ä»ä¸Šä¸€ä¸ªåˆ†æ”¯çš„åé¢åŒºé—´å¾—åˆ°ï¼Œè¿›è€Œç¡®å®šè¾¹ç•Œå¦‚ä½•è®¾ç½®ï¼›
- æ ¹æ®è¾¹ç•Œæƒ…å†µï¼Œçœ‹å–ä¸­é—´æ•°çš„æ—¶å€™æ˜¯å¦éœ€è¦ä¸Šå–æ•´ï¼›
- <font color = red>**æ³¨æ„ 2**</font>ï¼š è¿™ä¸€æ­¥ä¹Ÿä¾ç„¶æ˜¯æ ¹æ®ç»éªŒï¼Œå»ºè®®å…ˆä¸è¦è®°ä½ç»“è®ºï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªæ€æƒ³è§£å†³é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œå»æ€è€ƒå¯èƒ½äº§ç”Ÿæ­»å¾ªç¯çš„åŸå› ï¼Œè¿›è€Œç†è§£ä»€ä¹ˆæ—¶å€™éœ€è¦åœ¨æ‹¬å·é‡ŒåŠ  1 ï¼Œä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ï¼›
- åœ¨é€€å‡ºå¾ªç¯ä»¥åï¼Œæ ¹æ®æƒ…å†µçœ‹æ˜¯å¦éœ€è¦å¯¹ä¸‹æ ‡ä¸ºÂ `left`Â æˆ–è€…Â `right`Â çš„å…ƒç´ è¿›è¡Œå•ç‹¬åˆ¤æ–­ï¼Œè¿™ä¸€æ­¥å«ã€Œåå¤„ç†ã€ã€‚åœ¨æœ‰äº›é—®é¢˜ä¸­ï¼Œæ’é™¤æ‰æ‰€æœ‰ä¸ç¬¦åˆè¦æ±‚çš„å…ƒç´ ä»¥åï¼Œå‰©ä¸‹çš„é‚£ 1 ä¸ªå…ƒç´ å°±ä¸€å®šæ˜¯ç›®æ ‡å…ƒç´ ã€‚å¦‚æœæ ¹æ®é—®é¢˜çš„åœºæ™¯ï¼Œç›®æ ‡å…ƒç´ ä¸€å®šåœ¨æœç´¢åŒºé—´é‡Œï¼Œé‚£ä¹ˆé€€å‡ºå¾ªç¯ä»¥åï¼Œå¯ä»¥ç›´æ¥è¿”å›Â `left`ï¼ˆæˆ–è€…Â `right`ï¼‰ã€‚

ã€æ³¨æ„äº‹é¡¹ã€‘ï¼š

- å…ˆå†™åˆ†æ”¯ï¼Œå†å†³å®šä¸­é—´æ•°æ˜¯å¦ä¸Šå–æ•´ï¼›
- åœ¨ä½¿ç”¨å¤šäº†ä»¥åï¼Œå°±å¾ˆå®¹æ˜“è®°ä½ï¼Œåªè¦çœ‹åˆ°Â `left = mid`Â ï¼Œå®ƒå¯¹åº”çš„å–ä¸­ä½æ•°çš„å–æ³•ä¸€å®šæ˜¯Â `int mid = left + (right - left + 1) / 2;`ã€‚

## 4. å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„äºŒåˆ†æœç´¢



ä»¥ä¸‹æ˜¯æœ€å¸¸è§çš„ä»£ç å½¢å¼ï¼Œå…¶ä¸­çš„æ ‡è®°æ˜¯éœ€è¦æ³¨æ„çš„ç»†èŠ‚ï¼š

```java
public int binarySearch(int[] nums, int target) {
    if (nums.length == 0) return -1;
    int left = 0;
    //å› ä¸ºè¦æœç´¢å·¦å³ä¾§è¾¹ç•Œï¼Œæ‰€ä»¥ç´¢å¼•æœ€å¤§ä½ç½®å¿…é¡»å¤§äºæ•°ç»„é•¿åº¦ï¼Œæœç´¢çš„åŒºé—´ä¸º[left, right)
    int right = nums.length;
    
    //å…¶ä»–ä»£ç 
    while (left < right) {
        int mid = (left + right) >>> 1;
        if (nums[mid] == target) {
            right = mid;
        } else if (target > nums[mid]) {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [mid + 1, right]
            left = mid + 1;
        } else {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [left, mid)
            right = mid;
        }
    }
    return nums[left] == target ? left : -1;
}
```

**1ã€ä¸ºä»€ä¹ˆ while ä¸­æ˜¯ < è€Œä¸æ˜¯ <=?**

ç­”ï¼šç”¨ç›¸åŒçš„æ–¹æ³•åˆ†æï¼Œå› ä¸º â€‹`right = nums.length`â€‹ è€Œä¸æ˜¯ `nums.length - 1`ã€‚å› æ­¤æ¯æ¬¡å¾ªç¯çš„ã€Œæœç´¢åŒºé—´ã€æ˜¯ `[left, right)` å·¦é—­å³å¼€ã€‚

`while(left < right)` ç»ˆæ­¢çš„æ¡ä»¶æ˜¯ `left == right`ï¼Œæ­¤æ—¶æœç´¢åŒºé—´ `[left, left)` ä¸ºç©ºï¼Œæ‰€ä»¥å¯ä»¥æ­£ç¡®ç»ˆæ­¢ã€‚

**2ã€ä¸ºä»€ä¹ˆæ²¡æœ‰è¿”å› -1 çš„æ“ä½œï¼Ÿå¦‚æœ nums ä¸­ä¸å­˜åœ¨ target è¿™ä¸ªå€¼ï¼Œæ€ä¹ˆåŠï¼Ÿ**

ç­”ï¼šå› ä¸ºè¦ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå…ˆç†è§£ä¸€ä¸‹è¿™ä¸ªã€Œå·¦ä¾§è¾¹ç•Œã€æœ‰ä»€ä¹ˆç‰¹æ®Šå«ä¹‰ï¼š

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722125116.png)

å¯¹äºè¿™ä¸ªæ•°ç»„ï¼Œç®—æ³•ä¼šè¿”å› 1ã€‚è¿™ä¸ª 1 çš„å«ä¹‰å¯ä»¥è¿™æ ·è§£è¯»ï¼šnums ä¸­å°äº 2 çš„å…ƒç´ æœ‰ 1 ä¸ªã€‚

- æ¯”å¦‚å¯¹äºæœ‰åºæ•°ç»„ nums = [2,3,5,7]ï¼Œtarget = 1ï¼Œç®—æ³•ä¼šè¿”å› 0ï¼Œå«ä¹‰æ˜¯ï¼šnums ä¸­å°äº 1 çš„å…ƒç´ æœ‰ 0 ä¸ªã€‚

- å†æ¯”å¦‚è¯´ nums = [2,3,5,7], target = 8ï¼Œç®—æ³•ä¼šè¿”å› 4ï¼Œå«ä¹‰æ˜¯ï¼šnums ä¸­å°äº 8 çš„å…ƒç´ æœ‰ 4 ä¸ªã€‚

ç»¼ä¸Šå¯ä»¥çœ‹å‡ºï¼Œå‡½æ•°çš„è¿”å›å€¼ï¼ˆå³ left å˜é‡çš„å€¼ï¼‰å–å€¼åŒºé—´æ˜¯é—­åŒºé—´ `[0, nums.length]`ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¾ªç¯ç»“æŸåæ·»åŠ åˆ¤æ–­å°±èƒ½åœ¨æ­£ç¡®çš„æ—¶å€™ return -1ï¼š

```java
while (left < right) {
    //...
}

// target æ¯”æ‰€æœ‰æ•°éƒ½å¤§
if (left == nums.length) return -1;

// ç±»ä¼¼ä¹‹å‰ç®—æ³•çš„å¤„ç†æ–¹å¼
return nums[left] == target ? left : -1;
```



**3ã€ä¸ºä»€ä¹ˆ left = mid + 1ï¼Œright = mid ï¼Ÿå’Œä¹‹å‰çš„ç®—æ³•ä¸ä¸€æ ·ï¼Ÿ**

ç­”ï¼šè¿™ä¸ªå°±æ˜¯å‡æ²»çš„æ€æƒ³ï¼Œå…ˆæ’é™¤ä¸å­˜åœ¨çš„åŒºé—´ã€‚å› ä¸ºæˆ‘ä»¬çš„ã€Œæœç´¢åŒºé—´ã€æ˜¯ `[left, right)` å·¦é—­å³å¼€ï¼Œæ‰€ä»¥å½“ `nums[mid]` è¢«æ£€æµ‹ä¹‹åï¼Œä¸‹ä¸€æ­¥çš„æœç´¢åŒºé—´åº”è¯¥å»æ‰ `mid `åˆ†å‰²æˆä¸¤ä¸ªåŒºé—´ï¼Œå³ `[left, mid) `æˆ– `[mid + 1, right)`

**4ã€ä¸ºä»€ä¹ˆè¯¥ç®—æ³•èƒ½å¤Ÿæœç´¢å·¦ä¾§è¾¹ç•Œï¼Ÿ**

ç­”ï¼šå…³é”®åœ¨äºå¯¹äº `nums[mid] == target` è¿™ç§æƒ…å†µçš„å¤„ç†ï¼š

```java
if (nums[mid] == target) {
    right = mid;
}
```

å¯è§ï¼Œæ‰¾åˆ° target æ—¶ä¸è¦ç«‹å³è¿”å›ï¼Œè€Œæ˜¯ç¼©å°ã€Œæœç´¢åŒºé—´ã€çš„ä¸Šç•Œ `right`ï¼Œåœ¨åŒºé—´ `[left, mid)` ä¸­ç»§ç»­æœç´¢ï¼Œå³ä¸æ–­å‘å·¦æ”¶ç¼©ï¼Œè¾¾åˆ°é”å®šå·¦ä¾§è¾¹ç•Œçš„ç›®çš„ã€‚

**5ã€ä¸ºä»€ä¹ˆè¿”å› left è€Œä¸æ˜¯ rightï¼Ÿ**

ç­”ï¼šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸º while ç»ˆæ­¢çš„æ¡ä»¶æ˜¯ `left == right`ã€‚

**6ã€èƒ½ä¸èƒ½æƒ³åŠæ³•æŠŠ right å˜æˆ `nums.length - 1`ï¼Œä¹Ÿå°±æ˜¯ç»§ç»­ä½¿ç”¨ä¸¤è¾¹éƒ½é—­çš„ã€Œæœç´¢åŒºé—´ã€ï¼Ÿè¿™æ ·å°±å¯ä»¥å’Œç¬¬ä¸€ç§äºŒåˆ†æœç´¢åœ¨æŸç§ç¨‹åº¦ä¸Šç»Ÿä¸€èµ·æ¥äº†ã€‚**

ç­”ï¼šå½“ç„¶å¯ä»¥ï¼Œåªè¦ä½ æ˜ç™½äº†ã€Œæœç´¢åŒºé—´ã€è¿™ä¸ªæ¦‚å¿µï¼Œå°±èƒ½æœ‰æ•ˆé¿å…æ¼æ‰å…ƒç´ ã€‚ä¸‹é¢æˆ‘ä»¬ä¸¥æ ¼æ ¹æ®é€»è¾‘æ¥ä¿®æ”¹ï¼š

å› ä¸ºä½ éè¦è®©æœç´¢åŒºé—´ä¸¤ç«¯éƒ½é—­ï¼Œæ‰€ä»¥ right åº”è¯¥åˆå§‹åŒ–ä¸º `nums.length - 1`ï¼Œwhile çš„ç»ˆæ­¢æ¡ä»¶åº”è¯¥æ˜¯ `left == right + 1`ï¼Œä¹Ÿå°±æ˜¯å…¶ä¸­åº”è¯¥ç”¨ `<=`ï¼š

```java
int left_bound(int[] nums, int target) {
    
    // æœç´¢åŒºé—´ä¸º [left, right]
    int left = 0, right = nums.length - 1;
    
    while (left <= right) {
        int mid = left + (right - left) / 2;
        // if else ...
    }
```

å› ä¸ºæœç´¢åŒºé—´æ˜¯ä¸¤ç«¯éƒ½é—­çš„ï¼Œä¸”ç°åœ¨æ˜¯æœç´¢å·¦ä¾§è¾¹ç•Œï¼Œæ‰€ä»¥ left å’Œ right çš„æ›´æ–°é€»è¾‘å¦‚ä¸‹ï¼š

```java
if (nums[mid] < target) {
    // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
    left = mid + 1;
} else if (nums[mid] > target) {
    // æœç´¢åŒºé—´å˜ä¸º [left, mid-1]
    right = mid - 1;
} else if (nums[mid] == target) {
    // æ”¶ç¼©å³ä¾§è¾¹ç•Œ
    right = mid - 1;
}
```



ç”±äº while çš„é€€å‡ºæ¡ä»¶æ˜¯ `left == right + 1`ï¼Œæ‰€ä»¥å½“ target æ¯” nums ä¸­æ‰€æœ‰å…ƒç´ éƒ½å¤§æ—¶ï¼Œä¼šå­˜åœ¨ä»¥ä¸‹æƒ…å†µä½¿å¾—ç´¢å¼•è¶Šç•Œï¼š

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722125350.png)

å› æ­¤ï¼Œæœ€åè¿”å›ç»“æœçš„ä»£ç åº”è¯¥æ£€æŸ¥è¶Šç•Œæƒ…å†µï¼š

```java
if (left >= nums.length || nums[left] != target) {
    return -1;
}
   
return left;
```



è‡³æ­¤ï¼Œæ•´ä¸ªç®—æ³•å°±å†™å®Œäº†ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š

```java
public int left_bound(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    // æœç´¢åŒºé—´ä¸º [left, right]
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            // æœç´¢åŒºé—´å˜ä¸º [mid+1, right]
            left = mid + 1;
        } else if (nums[mid] > target) {
            // æœç´¢åŒºé—´å˜ä¸º [left, mid-1]
            right = mid - 1;
        } else if (nums[mid] == target) {
            // æ”¶ç¼©å³ä¾§è¾¹ç•Œ
            right = mid - 1;
        }
    }
    // æ£€æŸ¥å‡ºç•Œæƒ…å†µ
    if (left >= nums.length || nums[left] != target)
        return -1;
    return left;
}
```



è¿™æ ·å°±å’Œç¬¬ä¸€ç§äºŒåˆ†æœç´¢ç®—æ³•ç»Ÿä¸€äº†ï¼Œéƒ½æ˜¯ä¸¤ç«¯éƒ½é—­çš„ã€Œæœç´¢åŒºé—´ã€ï¼Œè€Œä¸”æœ€åè¿”å›çš„ä¹Ÿæ˜¯ left å˜é‡çš„å€¼ã€‚åªè¦æŠŠä½äºŒåˆ†æœç´¢çš„é€»è¾‘ï¼Œä¸¤ç§å½¢å¼å¤§å®¶çœ‹è‡ªå·±å–œæ¬¢å“ªç§è®°å“ªç§å§ã€‚

## 5. å¯»æ‰¾å³ä¾§è¾¹ç•Œçš„äºŒåˆ†æŸ¥æ‰¾

ç±»ä¼¼å¯»æ‰¾å·¦ä¾§è¾¹ç•Œçš„ç®—æ³•ï¼Œè¿™é‡Œä¹Ÿä¼šæä¾›ä¸¤ç§å†™æ³•ï¼Œè¿˜æ˜¯å…ˆå†™å¸¸è§çš„å·¦é—­å³å¼€çš„å†™æ³•ï¼Œåªæœ‰ä¸¤å¤„å’Œæœç´¢å·¦ä¾§è¾¹ç•Œä¸åŒï¼Œå·²æ ‡æ³¨ï¼š

```java
public int right_bound(int[] nums, int target) {
    if (nums.length == 0) return -1;
    int left = 0, right = nums.length;

    while (left < right) {
        int mid = (left + right) / 2;
        if (nums[mid] == target) {
            left = mid + 1; // æ³¨æ„
        } else if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid;
        }
    }
    return left - 1; // æ³¨æ„
}
```



**1ã€ä¸ºä»€ä¹ˆè¿™ä¸ªç®—æ³•èƒ½å¤Ÿæ‰¾åˆ°å³ä¾§è¾¹ç•Œï¼Ÿ**

ç­”ï¼šç±»ä¼¼åœ°ï¼Œå…³é”®ç‚¹è¿˜æ˜¯è¿™é‡Œï¼š

```java
int right_bound(int[] nums, int target) {
    if (nums.length == 0) return -1;
    int left = 0, right = nums.length;

    while (left < right) {
        int mid = (left + right) / 2;
        if (nums[mid] == target) {
            left = mid + 1; // æ³¨æ„
        } else if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid;
        }
    }
    return left - 1; // æ³¨æ„
}
```



å½“`nums[mid] == target`æ—¶ï¼Œä¸è¦ç«‹å³è¿”å›ï¼Œè€Œæ˜¯å¢å¤§ã€Œæœç´¢åŒºé—´ã€çš„ä¸‹ç•Œ leftï¼Œä½¿å¾—åŒºé—´ä¸æ–­å‘å³æ”¶ç¼©ï¼Œè¾¾åˆ°é”å®šå³ä¾§è¾¹ç•Œçš„ç›®çš„ã€‚

**2ã€ä¸ºä»€ä¹ˆæœ€åè¿”å› left - 1 è€Œä¸åƒå·¦ä¾§è¾¹ç•Œçš„å‡½æ•°ï¼Œè¿”å› leftï¼Ÿè€Œä¸”æˆ‘è§‰å¾—è¿™é‡Œæ—¢ç„¶æ˜¯æœç´¢å³ä¾§è¾¹ç•Œï¼Œåº”è¯¥è¿”å› right æ‰å¯¹ã€‚**

ç­”ï¼šé¦–å…ˆï¼Œwhile å¾ªç¯çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ `left == right`ï¼Œæ‰€ä»¥ left å’Œ right æ˜¯ä¸€æ ·çš„ï¼Œä½ éè¦ä½“ç°å³ä¾§çš„ç‰¹ç‚¹ï¼Œè¿”å› `right - 1` å¥½äº†ã€‚

è‡³äºä¸ºä»€ä¹ˆè¦*å‡ä¸€*ï¼Œè¿™æ˜¯æœç´¢å³ä¾§è¾¹ç•Œçš„ä¸€ä¸ªç‰¹æ®Šç‚¹ï¼Œå…³é”®åœ¨è¿™ä¸ªæ¡ä»¶åˆ¤æ–­ï¼š

```java
if (nums[mid] == target) {
    left = mid + 1;
}
```

![](https://iqqcode-blog.oss-cn-beijing.aliyuncs.com/img/20200722134715.png)

è¿™æ ·æƒ³: `mid = left - 1`

å› ä¸ºæˆ‘ä»¬å¯¹ left çš„æ›´æ–°å¿…é¡»æ˜¯ `left = mid + 1`ï¼Œå°±æ˜¯è¯´ while å¾ªç¯ç»“æŸæ—¶ï¼Œ`nums[left]` ä¸€å®šä¸ç­‰äº target äº†ï¼Œè€Œ `nums[left-1]` å¯èƒ½æ˜¯ targetã€‚

è‡³äºä¸ºä»€ä¹ˆ left çš„æ›´æ–°å¿…é¡»æ˜¯ left = mid + 1ï¼ŒåŒå·¦ä¾§è¾¹ç•Œæœç´¢ï¼Œå°±ä¸å†èµ˜è¿°ã€‚

**3ã€ä¸ºä»€ä¹ˆæ²¡æœ‰è¿”å› -1 çš„æ“ä½œï¼Ÿå¦‚æœ nums ä¸­ä¸å­˜åœ¨ target è¿™ä¸ªå€¼ï¼Œæ€ä¹ˆåŠï¼Ÿ**

ç­”ï¼šç±»ä¼¼ä¹‹å‰çš„å·¦ä¾§è¾¹ç•Œæœç´¢ï¼Œå› ä¸º while çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ left == rightï¼Œå°±æ˜¯è¯´ left çš„å–å€¼èŒƒå›´æ˜¯ [0, nums.length]ï¼Œæ‰€ä»¥å¯ä»¥æ·»åŠ ä¸¤è¡Œä»£ç ï¼Œæ­£ç¡®åœ°è¿”å› -1ï¼š

```java
while (left < right) {
    // ...
}
if (left == 0)  return -1;

return nums[left-1] == target ? (left-1) : -1;
```



**4ã€æ˜¯å¦ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªç®—æ³•çš„ã€Œæœç´¢åŒºé—´ã€ä¹Ÿç»Ÿä¸€æˆä¸¤ç«¯éƒ½é—­çš„å½¢å¼å‘¢ï¼Ÿè¿™æ ·è¿™ä¸‰ä¸ªå†™æ³•å°±å®Œå…¨ç»Ÿä¸€äº†ï¼Œä»¥åå°±å¯ä»¥é—­ç€çœ¼ç›å†™å‡ºæ¥äº†ã€‚**

ç­”ï¼šå½“ç„¶å¯ä»¥ï¼Œç±»ä¼¼æœç´¢å·¦ä¾§è¾¹ç•Œçš„ç»Ÿä¸€å†™æ³•ï¼Œå…¶å®åªè¦æ”¹ä¸¤ä¸ªåœ°æ–¹å°±è¡Œäº†ï¼š

```java
int right_bound(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] == target) {
            // è¿™é‡Œæ”¹æˆæ”¶ç¼©å·¦ä¾§è¾¹ç•Œå³å¯
            left = mid + 1;
        } else if (nums[mid] < target) {
            left = mid + 1;
        } else (nums[mid] > target) {
            right = mid - 1;
        } 
    }
    // è¿™é‡Œæ”¹ä¸ºæ£€æŸ¥ right è¶Šç•Œçš„æƒ…å†µï¼Œè§ä¸‹å›¾
    if (right < 0 || nums[right] != target)
        return -1;
    return right;
}
```

å½“ target æ¯”æ‰€æœ‰å…ƒç´ éƒ½å°æ—¶ï¼Œright ä¼šè¢«å‡åˆ° -1ï¼Œæ‰€ä»¥éœ€è¦åœ¨æœ€åé˜²æ­¢è¶Šç•Œã€‚

## 6. æ¨¡æ¿æ€»ç»“

å¯¹äºå¯»æ‰¾æŸä¸€å…ƒç´ æ˜¯å¦å­˜åœ¨çš„äºŒåˆ†æœç´¢ï¼Œå¸¸è§çš„æ‰‹æ³•æ˜¯ä½¿ç”¨**å·¦é—­å³é—­ã€Œleft, rightã€ï¼Œright = [æ•°ç»„é•¿åº¦ - 1]**

```java
public int binarySearch(int[] nums, int target) {
    int left = 0;
    int right = nums.length - 1;
    while (left < right) {
        // é€‰æ‹©ä¸­ä½æ•°æ—¶ä¸‹å–æ•´
        int mid = (left + right) >>> 1;
        // check(mid)
        if(target > nums[mid]) {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [mid + 1, right]
            left  = mid + 1;
        } else {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [left, mid]
            right = mid;
        }
    }
    // é€€å‡ºå¾ªç¯çš„æ—¶å€™ï¼Œç¨‹åºåªå‰©ä¸‹ä¸€ä¸ªå…ƒç´ æ²¡æœ‰çœ‹åˆ° (left = rightæŒ‡å‘çš„å…ƒç´ )
    // è§†æƒ…å†µï¼Œæ˜¯å¦éœ€è¦å•ç‹¬åˆ¤æ–­ leftï¼ˆæˆ–è€… rightï¼‰è¿™ä¸ªä¸‹æ ‡çš„å…ƒç´ æ˜¯å¦ç¬¦åˆé¢˜æ„
    return nums[left] == target ? left : -1;
}
```



å¯¹äºå¯»æ‰¾å·¦å³è¾¹ç•Œçš„äºŒåˆ†æœç´¢ï¼Œå¸¸è§çš„æ‰‹æ³•æ˜¯ä½¿ç”¨**å·¦é—­å³å¼€ã€Œleft, rightï¼‰ï¼Œright = [æ•°ç»„é•¿åº¦]**

ã€æœæ‰€å·¦è¾¹ç•Œã€‘

```java
public int binarySearch_left(int[] nums, int target) {
    int left = 0;
    //å› ä¸ºè¦æœç´¢å·¦å³ä¾§è¾¹ç•Œï¼Œæ‰€ä»¥ç´¢å¼•æœ€å¤§ä½ç½®å¿…é¡»å¤§äºæ•°ç»„é•¿åº¦ï¼Œæœç´¢çš„åŒºé—´ä¸º[left, right)
    int right = nums.length;
    while (left < right) {
        int mid = (left + right) >>> 1;
        if (target > nums[mid]) {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [mid + 1, right]
            left = mid + 1;
        } else {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [left, mid)
            right = mid;
        }
    }
    return nums[left] == target ? left : -1;
}
```

ã€æœæ‰€å³è¾¹ç•Œã€‘

```java
public static int binarySearch(int[] nums, int target) {
    int left = 0;
    //å› ä¸ºè¦æœç´¢å·¦å³ä¾§è¾¹ç•Œï¼Œæ‰€ä»¥ç´¢å¼•æœ€å¤§ä½ç½®å¿…é¡»å¤§äºæ•°ç»„é•¿åº¦ï¼Œæœç´¢çš„åŒºé—´ä¸º[left, right)
    int right = nums.length;
    while (left < right) {
        int mid = (left + right) >>> 1;
        if (target == nums[mid]) {
            left = mid + 1;
        } else if (target > nums[mid]) {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [mid + 1, right]
            left = mid + 1;
        } else {
            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [left, mid)
            right = mid;
        }
    }
    return nums[left-1] == target ? left-1 : -1;
}
```

--------------------------------------

**left <= right**

æˆ‘ä»¬è¿˜æ ¹æ®é€»è¾‘å°†ã€Œæœç´¢åŒºé—´ã€å…¨éƒ½ç»Ÿä¸€æˆäº†ä¸¤ç«¯éƒ½é—­ï¼Œä¾¿äºè®°å¿†ï¼Œåªè¦ä¿®æ”¹ä¸¤å¤„å³å¯å˜åŒ–å‡ºä¸‰ç§å†™æ³•ï¼š

```java
public int binary_search(int[] nums, int target) {
    int left = 0, right = nums.length - 1; 
    while(left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1; 
        } else if(nums[mid] == target) {
            // ç›´æ¥è¿”å›
            return mid;
        }
    }
    // ç›´æ¥è¿”å›
    return -1;
}

public int left_bound(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1;
        } else if (nums[mid] == target) {
            // åˆ«è¿”å›ï¼Œé”å®šå·¦ä¾§è¾¹ç•Œ
            right = mid - 1;
        }
    }
    // æœ€åè¦æ£€æŸ¥ left è¶Šç•Œçš„æƒ…å†µ
    if (left >= nums.length || nums[left] != target)
        return -1;
    return left;
}


public int right_bound(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    while (left <= right) {
        int mid = left + (right - left) / 2;
        if (nums[mid] < target) {
            left = mid + 1;
        } else if (nums[mid] > target) {
            right = mid - 1;
        } else if (nums[mid] == target) {
            // åˆ«è¿”å›ï¼Œé”å®šå³ä¾§è¾¹ç•Œ
            left = mid + 1;
        }
    }
    // æœ€åè¦æ£€æŸ¥ right è¶Šç•Œçš„æƒ…å†µ
    if (right < 0 || nums[right] != target)
        return -1;
    return right;
}
```



----------------------------------------

ã€å‚è€ƒé“¾æ¥ã€‘

1. [ç”¨å‡æ²»æ€æƒ³å†™äºŒåˆ†æŸ¥æ‰¾é—®é¢˜ã€å‡ ç§æ¨¡æ¿å†™æ³•çš„ä»‹ç»ä¸æ¯”è¾ƒ](https://leetcode-cn.com/problems/search-insert-position/solution/te-bie-hao-yong-de-er-fen-cha-fa-fa-mo-ban-python-/)
2. [äºŒåˆ†æŸ¥æ‰¾ç®—æ³•](https://ojeveryday.github.io/AlgoWiki/#/BinarySearch/01-introduction?id=äºŒåˆ†æŸ¥æ‰¾ç®—æ³•-1)
3. [äºŒåˆ†æŸ¥æ‰¾è¯¦è§£](https://labuladong.gitbook.io/algo/suan-fa-si-wei-xi-lie/er-fen-cha-zhao-xiang-jie)